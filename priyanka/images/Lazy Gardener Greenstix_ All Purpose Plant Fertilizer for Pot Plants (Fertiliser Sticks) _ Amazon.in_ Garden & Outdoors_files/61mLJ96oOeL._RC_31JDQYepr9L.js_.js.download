(function(w){var p=window.AmazonUIPageJS||window.P,ea=p._namespace||p.attributeErrors,d=ea?ea("DetailPageImageBlockAssets",""):p;d.guardFatal?d.guardFatal(w)(d,window):d.execute(function(){w(d,window)})})(function(w,p,ea){w.register("postMetric",function(){return{postCountMetric:function(d){if("undefined"!==typeof d){var a=p.ue;if(a){var b=a.count(d)||0;a.count(d,b+1)}}},postTimeMetric:function(d,a){if("undefined"!==typeof d&&"undefined"!==typeof a){var b=p.ue;b&&b.count(d,a)}},emitNexusMetric:function(d){p.ue&&
ue.event&&ue.event(d,"VSEImageBlockEvents","vse.VSEImageBlockEvents.3",{ssd:!1})},buildNexusMetric:function(d,a,b,k,n,e,m,f){return{eventSource:"IBCarousel",placementContext:f,clientId:"VSE",userAgentData:navigator.userAgent,titleSessionId:"0",eventName:d,intPayload:a,videoAsin:b,videoAsinList:"",groupType:k,pageUrl:n,pageAsin:e,weblabIds:m}}}});"use strict";w.register("logFailedInteractionMetric",function(){return{isEnabled:!1}});w.register("postEarlyMetric",function(){return null});"use strict";
w.when("jQuery","ImageBlockController","ImageBlockATF","ImageBlockBTF").register("ImageBlock",function(d,a,b,k){d=d.extend(!0,{},b,k);var n=new a(d);w.register("ImageBlockAPI",function(){return n.api});return n});"use strict";w.when("A","jQuery").execute(function(d,a){d.on("a:image:load:landingImage",function(){p.performance&&performance.now&&p.ue&&ue.count&&ue.count("DPLandingImageHighResDownloadTime",performance.now())});d.loadDynamicImage(a("#landingImage"))});"use strict";w.when("ImageBlockATF",
"atf").register("ImageBlockAiryLoader",function(d){function a(a){a&&(w.load.js(a),p.performance&&performance.now&&p.ue&&ue.count&&ue.count("DPAiryDownloadStartTime",p.parseInt(performance.now())))}function b(a){a&&w.load.css(a)}var k=d.airyConfig;k===ea?w.when("ImageBlockBTF").execute(function(d){k=d.airyConfig;a(k.jsUrl);b(k.cssUrl)}):(a(k.jsUrl),b(k.cssUrl))});"use strict";w.when("jQuery","ImageBlockModel","ImageBlockView","imageBlockUtils","ImageBlockState").register("ImageBlockController",function(d,
a,b,k,n){var e={};return function(m){var f=this;f.dispatch=function(a,b){var f=e[a];k.isDefined(f)&&d.each(f,function(a,e){e.call(p,b)})};f.register=function(a,b){k.isDefined(e[a])||(e[a]=[]);"function"===typeof b&&e[a].push(b)};f.model=new a(m,f);f.view=new b(m,f,f.model);f.api=new n(m,f,f.model);f.init=function(){f.model.init();f.view.init()};f.init()}});"use strict";w.when("A","imageBlockUtils").register("ImageBlockModel",function(d,a){function b(b,e,d,f,m,k){a.isDefined(b)&&(l.type=b);a.isDefined(e)&&
(l.index=e);a.isDefined(d)&&(l.thumbnailIndex=d);a.isDefined(f)&&(l.variant=f);a.isDefined(m)&&(l.color=m);l.shoppableScene=k||null}function k(a){b("image",0,0,"MAIN",a||f.landingAsinColor||f.defaultColor,null)}function n(a){a=a.data;p=d.copy(l);b(a.type,a.index,a.thumbnailIndex,a.variant,a.color,a.shoppableScene)}function e(a){n(a);a=d.copy(a);a.data=d.copy(l);I.dispatch("updateView",a)}function m(){p=d.copy(l);k(l.color)}var f,I,l={},p={},B,F;return function(a,b){I=b;f=a;I.register("updateSelection",
e);I.register("updateModel",n);I.register("resetModel",m);this.init=function(){k()};this.getCurrentItem=function(){return d.copy(l)};this.getPreviousItem=function(){return d.copy(p)};this.setCurrentEvent=function(a){B=a};this.getCurrentEvent=function(){return B};this.setImmersiveViewModalInstance=function(a){F=a};this.getImmersiveViewModalInstance=function(){return F};this.updateTitle=function(a){f.title=a}}});"use strict";w.when("ImageBlockBTF","postMetric").register("ImageBlockInitViews",function(d,
a){function b(a,b,m,f,k){function l(a){"click"===a.type&&f.postCountMetric("thumbClick");"click"===a.type&&t.overrideAltImageClickAction?q.dispatch("thumbActionClick",a):q.dispatch("updateSelection",a)}function R(a){t.useClickZoom||q.dispatch("imageClick",a)}function B(a){t.useClickZoom||q.dispatch("imageHover",a)}function F(a){q.dispatch("button360Click",a)}function v(b){!m.isDefined(b)||"swatchClick"!==b.type&&"updatedData"!==b.type?(r.update(b),"swatchHover"!==b.type&&x.getPreviousItem().thumbnailIndex!==
b.data.thumbnailIndex&&f.postCountMetric(b.data.type+"ThumbnailSelected"),a.trigger("image-block-thumbnail-selected",b.data)):(r.render(b.data.color,!1,b.onload),b={hasComponents:!0,components:[{name:"mainimage"},{name:"thumbnail"}]},"function"===typeof p.markFeatureRender&&p.markFeatureRender("imageblock",b))}function C(a){q.dispatch("resize",a)}function L(a){m.selectThumbnail(a,y)}function O(){"function"===typeof p.markFeatureInteractive&&p.markFeatureInteractive("imageblock",{hasComponents:!0,
components:[{name:"mainimage",events:["click"],alwaysInteractive:!0}]})}function N(){"function"===typeof p.markFeatureInteractive&&p.markFeatureInteractive("imageblock",{hasComponents:!0,components:[{name:"mainimage",events:["hover"],alwaysInteractive:!0},{name:"thumbnail",events:["click","hover"],alwaysInteractive:!0}]});1===d.useIV?w.when("a-modal").execute(function(){O()}):O();t.disableHoverOnAltImages||a.declarative("thumb-action",["mouseenter","mouseleave"],l);a.declarative("thumb-action",["click"],
l);a.declarative("main-image-click",["click"],R);a.declarative("main-image-click",["mouseenter","mouseleave"],B);a.declarative("button-360-click",["click"],F);a.on("resize",C)}function z(a){var b=a.data,g;b&&"ingress"!==b.type&&"click"===a.type&&(g=a);return g}function g(a){var b=x.getCurrentItem(),g={type:"click"};g.$declarativeParent=a;g.data=b;return g}var r,t,q,x,y;return function(a,d,f){r=this;t=a;q=d;x=f;y=b("#imageBlock #altImages ul");var m=b("#imageBlock .canvas"),h=b("#main-image-container"),
c;r.subViews=[];for(d=0;d<k.length;d++)r.subViews.push(new k[d](a,f,r,q));r.render=function(a,d,f){var k=0;y.find(".item").remove();a=a||x.getCurrentItem().color;b.each(r.subViews,function(c,b){k=b.render(a,k,m,y,h,d,f)||k});var q=y.find(".a-button-selected").closest(".a-declarative");c=g(q)};r.init=function(){y=b("#imageBlock #altImages ul");var a=y.find(".a-button-selected").closest(".a-declarative"),c=a.data("action"),a=a.data(c)||{};a.color=t.landingAsinColor||t.defaultColor;q.dispatch("updateModel",
{data:a});r.render(a.color,!0);t.isDebug&&p.console&&console.log(t);q.register("updateView",v);q.register("selectThumbnail",L);N()};r.update=function(a){b.each(r.subViews,function(c,b){b.update(a)});t.usePeekHover&&("mouseleave"===a.type?q.dispatch("updateSelection",c):"click"===a.type&&(c=z(a)||c))}}}var k=["A","jQuery","imageBlockUtils","postMetric"].concat(d.views);w.when.apply(w,k).register("ImageBlockView",function(){for(var a=arguments[0],e=arguments[1],d=arguments[2],f=arguments[3],k=[],l=
4,p=arguments.length;l<p;l++)k.push(arguments[l]);return b(a,e,d,f,k)})});"use strict";w.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockAltImageView",function(d,a,b,k,n,e,m){function f(c,h,g,e){if(!b.isjQueryObjDefined(c.find(".a-button-selected"))){var d=x.getCurrentItem();if(!e||"chromeless-video"!==d.type||!q.autoplayVideo){e=0;"image"===d.type&&(e=Math.max(B(d.color,d.variant),0));var f=h+e;f>=g&&(e=0,f=h);
h=b.getImageHash(d.color,e,q);-1!==h&&(y.dispatch("updateModel",{data:{index:e,thumbnailIndex:f,variant:h.variant,type:"image",shoppableScene:h.shoppableScene}}),h=c.find(".item").get(f),b.selectGivenThumbnail(a(h),c))}}}function I(c,h,g){h=q.colorImages&&q.colorImages[h];var d=c;b.isDefined(h)&&(a.each(h,function(a,h){c<q.maxAlts&&(b.createThumbnail({type:"image",index:a,thumbnailIndex:c,variant:h.variant,shoppableScene:h.shoppableScene},h.thumb,M,"imageThumbnail"),c++)}),e.isEnabled&&m.logAltImgRequestPlacedOnThumbnails(a,
e,x),f(M,d,c,g));return c}function l(c,h){if("image"===c.type){var g=a("#image-canvas-caption #canvasCaption"),e,d=q.staticStrings,f=q.colorImages,k=c.color,m=c.index;b.isShoppableScenesEnabled()&&c.shoppableScene?e=d.clickSceneTagsToShopProducts:h&&q.useIV?e=d.clickToExpand:f[k]&&f[k][m].hiRes&&q.useHoverZoom?(e=q.useHoverZoomIpad?d.touchToZoom:q.useClickZoom?d.clickToZoom:d.rollOverToZoom,q.hoverZoomIndicator&&(e="\x3cimg src\x3d'"+q.staticImages.hoverZoomIcon+"'/\x3e\x26nbsp;"+e)):q.useIV&&(e=
d.clickToExpand);g.html(e)}}function R(){G.find("li").removeClass("selected");a("#image-canvas-caption #canvasCaption").empty();b.hideUnavailable()}function B(a,h){return b.getIndexForVariant(a,h,q)}function F(a,b){var h=b.thumbnailIndex,e=q.colorToAsin[b.color]&&q.colorToAsin[b.color].asin;if(!(P&&"altImageIdx"in P&&P.altImageIdx===h&&"asin"in P&&P.asin===e)){var g="#",d=a.find(".imgTagWrapper img").get(0);d&&(g=d.src);var f=new Image;f.onload=function(){if(d){d.src=g;var a=d.width,c=d.height,b=
d.naturalWidth,f=d.naturalHeight;try{var k=(Math.abs(a/b*f-c)/c).toFixed(2);.01<k&&(p.ue&&p.ue.count("imageBlock-PC-hi_res",1),p.ueLogError&&(a={logLevel:"WARN",attribution:"imageBlock-PC-hi_res"},p.ueLogError({message:"[ImageBlock Hi-Res: Size distortion at altImageIdx "+h+" ASIN:"+e+" Diff:"+k.toString()+"]"},a)))}catch(m){p.ueLogError&&(a={logLevel:"WARN",attribution:"imageBlock-PC-hi_res"},p.ueLogError(m,a))}}};f.src=g;P.altImageIdx=h;P.asin=e}}function v(c,h){var e="a-dynamic-image";if(!q.acEnabled){var g;
a.each(c.main,function(a,c){b.isDefined(g)||(g=parseFloat(c[1]/c[0])<=parseFloat(q.holderRatio)?" a-stretch-vertical":" a-stretch-horizontal")});e+=g}var d=b.getMaxDimensionsOfMainImage(c.main,E,q),f=d[0],k=d[1],d=a("\x3cdiv\x3e\x3c/div\x3e"),f={"max-height":f,"max-width":k};d.addClass(e).css(f).attr({"data-old-hires":c.hiRes,"data-a-manual-replacement":"true",onload:h}).data("a-dynamic-image",c.main);return d}function C(a,b,h){var e="desktop-dp-atf-ib-shoppablescenes-tags-"+a;"function"==typeof uet&&
uet("bb",e,{wb:1});h.attr("data-a-image-name","shoppable-scene:"+a);h=G.find(".mirai-scene-image-block-template").clone().removeClass("mirai-scene-image-block-template aok-hidden").addClass("mirai-shoppable-scene");h.addClass("celwidget").attr("cel_widget_id",e);h.children("span").css("display","inline-block");y.dispatch("initialize-shoppable-scene",{index:a,shoppableScene:b.shoppableScene,imageSource:b.hiRes||b.large||b.lowRes,$tagPlaceholder:h.find(".mirai-scene-tag-placeholder"),$viewProductsButton:h.find(".mirai-scene-view-products-button")});
"MutationObserver"in p&&(new MutationObserver(function(h,e){h.forEach(function(h){"childList"===h.type&&h.target.classList.contains("mirai-scene-image-block-tag-container")&&1===h.addedNodes.length&&"IMG"===h.addedNodes[0].tagName&&""!==h.addedNodes[0].src&&(h=h.addedNodes[0],"function"!==typeof h.onload&&(h.onload=function(){d.trigger("shoppable-scene-image-loaded",{index:a,shoppableScene:b.shoppableScene})}),e.disconnect())})})).observe(h.find(".mirai-scene-image-block-tag-container")[0],{subtree:!0,
childList:!0,attributes:!1});"function"==typeof uet&&uet("cf",e,{wb:1});return h}function L(a){var h=E.css("height");null!==h&&a.find(".imgTagWrapper").css("height",h);a.addClass("selected");q.imgTagWrapperClasses&&a.find(".imgTagWrapper").addClass(q.imgTagWrapperClasses)}function O(a,h){if("image"===a.type||"unavailable"===a.type||"lazy-loaded"===a.type){b.isDefined(h)&&n.postCountMetric("mainImageUpdateOnTwisterVariationClick");var g=b.getImageHash(a.color,a.index,q);if(-1===g)return g={data:{index:0,
thumbnailIndex:0,variant:"",type:"unavailable"}},z(a)||(y.dispatch("updateModel",g),b.showUnavailable(a.color)),-1;var f=G.find(".item.itemNo"+a.thumbnailIndex);if(!b.isjQueryObjDefined(f)){var f=a.thumbnailIndex,k=v(g,h),r;r=b.isShoppableScenesEnabled()&&g.shoppableScene?C(f,g,k):G.find(".mainImageTemplate").clone().removeClass("template mainImageTemplate");r.addClass("image item itemNo"+f+" maintain-height").attr({"data-csa-c-type":"uxElement","data-csa-c-element-type":"navigational","data-csa-c-action":"image-block-main-image-hover",
"data-csa-c-posy":f+1});r.find(".placeHolder").replaceWith(k);G.find(".list").append(r);d.loadImageManually(k);f=r;F(f,a)}L(f);y.dispatch("loadMagnifier");l(a);q.useIV&&b.isDefined(g.hiRes)&&f.css("cursor","pointer");a.isUserGenerated&&(f=x.getPreviousItem(),k=a.variant,b.isDefined(k)&&f.thumbnailIndex!==a.thumbnailIndex&&(e.isEnabled&&m.logAltImgRequestServed(e),n.postCountMetric("ImageThumbnailSelectedVariant:"+k),0===k.indexOf("IG")&&(n.postCountMetric("IGImageSelectedVariant:"+k),n.postCountMetric("IGImageSelectedEvent:"+
a.interaction))));d.trigger("dp:image-block:update",g)}}function N(){a("#imageBlock").css("opacity","1");G.css("opacity","1");b.spinner(G,!1)}function z(a){return b.lazyLoadingRequired(a,x,q)}function g(){var h=G.find(".item .imgTagWrapper"),g=b.getContainerHeight(E,q.holderRatio,q.holderMaxHeight);0<g&&(E.height(g),h.height(g));G.find("img.a-dynamic-image").each(function(){var h=a(this);h.data("a-manual-replacement")&&d.loadDynamicImage(this);var c=h.data("a-dynamic-image"),c=b.getMaxDimensionsOfMainImage(c,
E,q);h.css({"max-height":c[0]+"px","max-width":c[1]+"px"})})}function r(a){l(x.getCurrentItem(),"mouseenter"===a.type)}var t,q,x,y,M,G,E,P={},h;d.on("triggerImageAjax",function(a){var h=x.getCurrentItem().color;q.colorImages[h]||(q.colorImages[h]=a);a={type:"updatedData",data:x.getCurrentItem()};y.dispatch("updateView",a);(h=q.colorToAsin[h])&&h.asin&&w.register(b.rankedImagesReadyEvent(h.asin))});return function(a,e,f,k){t=this;q=a;x=e;y=k;q.colorImages[q.landingAsinColor]=q.colorImages[q.defaultColor];
t.render=function(a,b,c,g,e,d,f){G=c;M=g;E=e;h=I(b,a,d);d?0===b&&F(G.find(".item.itemNo0"),x.getCurrentItem()):(a=x.getCurrentItem(),z(a)&&y.dispatch("updateModel",{data:{type:"lazy-loaded"}}));a=x.getCurrentItem();d=!d;z(a)||(N(),R(),d&&G.find(".list .item").remove());O(x.getCurrentItem(),f);return h};t.update=function(a){var c=a.data;x.setCurrentEvent(a);"ingress"===c.type||z(a.data)||(N(),R());if("swatchHover"===a.type)if(c.color===x.getCurrentItem().color)O(x.getCurrentItem());else{if(!a.captured){var g;
g=Math.max(B(c.color,x.getCurrentItem().variant),0);g=b.getImageHash(c.color,g,q);if(-1===g)z(c)||b.showUnavailable(c.color),g=-1;else{var c=G.find(".swatchHoverExp"),e=v(g);c.find(".imgTagWrapper").html(e);d.loadImageManually(e);n.postCountMetric("mainImageUpdateOnTwisterVariationHover");L(c);d.trigger("dp:image-block:update",g);g=void 0}-1!==g&&(a.captured=!0)}}else"image"===c.type&&(c.interaction=a.type,c.isUserGenerated=!0,"mouseenter"===a.type&&n.postCountMetric("dpcc_imageThumbHovered_"+(c.thumbnailIndex+
1)+"_"+h),O(c),q.usePeekHover&&"click"!==a.type||(b.selectGivenThumbnail(a.$declarativeParent,M),"click"===a.type&&(n.postCountMetric("dpcc_imageThumbClicked_total"),n.postCountMetric("dpcc_imageThumbClicked_"+(c.thumbnailIndex+1)+"_"+h))))};q.overrideAltImageClickAction&&b.addTag("clickEnabledOnAltImages");y.register("imageHover",r);y.register("resize",g)}});"use strict";w.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric","postEarlyMetric").register("ImageBlockMagnifierView",
function(d,a,b,k,n,e){function m(a){O?a.css("cursor","url('"+B.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in"))}function f(a){var e=a.match(/\._((\w|,|\.)+)_\.(gif|jpg|png)$/i);a={};if(b.isDefined(e))for(var e=e[1].split("_"),g=0;g<e.length;g++){var d=e[g].match(/^([A-Z]+)(\d+(\.\d+)?)$/);b.isDefined(d)&&(a[d[1]]=parseInt(d[2],10))}return a}function I(l,z){function g(){var a;z.useClickZoom?(a=z.offsetInClickZoom,a=[Math.min(1,
Math.max(0,J[0]-(D[0]+a))/(D[2]-2*a)),Math.min(1,Math.max(0,J[1]-(D[1]+a))/(D[3]-2*a))]):a=c&&c.updatePosition();if(a&&h&&h.detailSize){var b=[h.detailSize[0]-h.rect.width,h.detailSize[1]-h.rect.height];d.capabilities.rtl?h.detailImage.get(0).style.right=-(a[0]*b[0])+"px":h.detailImage.get(0).style.left=-(a[0]*b[0])+"px";h.detailImage.get(0).style.top=-(a[1]*b[1])+"px"}}function r(a){return a.offsetParent().hasClass("a-dynamic-image-container")}function t(h){var b=T?h.originalEvent.touches[0]||h.originalEvent.changedTouches[0]:
"";J=T?[b.pageX,b.pageY]:[h.pageX,h.pageY];if(d.capabilities.rtl){var c=a(p).width();J=T?[c-b.pageX,b.pageY]:[c-h.pageX,h.pageY]}}function q(a){T&&a.preventDefault();t(a);z.useClickZoom?a=[D[0],D[1],D[0]+D[2],D[1]+D[3]]:(a=c?c.offset:l.offsetParent().offset(),a=B.acEnabled?[a.left,a.top,C.width()+a.left,C.height()+a.top]:[H[0]+a.left,H[1]+a.top,H[0]+H[2]+a.left,H[1]+H[3]+a.top]);J[0]<a[0]||J[1]<a[1]||J[0]>=a[2]||J[1]>=a[3]||B.acEnabled&&!r(l)?(z.fadeMagnifier?Y||(Y=!0,da=setTimeout(function(){x(!0)},
500)):z.useClickZoom||x(),A&&(A=!1,clearTimeout(ba))):(A||(A=!0,ba=setTimeout(function(){k.postCountMetric("dppc_hoverZoomOpened");n.isEnabled&&e.logHoverZoomRequestServed(n)},1E3)),z.fadeMagnifier&&Y&&(Y=!1,clearTimeout(da)),g())}function x(b){b&&v.suppressMagnifier(!0);if(w&&(h&&h.hide(),c&&(c.destroy(),c=null),w=!1,T?(l.unbind("touchmove.magnifier touchstart.magnifier touchend.magnifier"),a(document).trigger("disengaged.magnifier")):a(document).unbind("mousemove.magnifier").trigger("disengaged.magnifier"),
I(),b))l.one("click.magnifier touchstart.magnifier",function(a){y(a,!0)})}function y(b,e){e&&v.suppressMagnifier(!1);if(!w&&!V&&(0===U&&(k.postCountMetric("dppc_hoverTime",new Date-(p.ue&&p.ue.t0||0)),U=1),ha[X]||(k.postCountMetric("dppc_hoverMain"),ha[X]=1),H=[l.position().left,l.position().top,l.width(),l.height()],X&&(t(b),h?h.refit().show():h=new L,z.useClickZoom||(c=c||new ca),D=h.getWindowSize(),g()),w=!0,T?(l.unbind("touchstart.magnifier touchmove.magnifier").bind("touchmove.magnifier",q).bind("touchend.magnifier",
x),a(document).trigger("engaged.magnifier")):(B.acEnabled?C.unbind("mousemove.magnifier"):l.unbind("mousemove.magnifier"),a(document).trigger("engaged.magnifier").bind("mousemove.magnifier",q)),e)){var d=a("#zoomWindow");if(0<d.length)d.one("click.magnifier touchend.magnifier",function(a){x(!0)})}}function I(){z.useHoverZoom&&(T?l.bind("touchstart.magnifier touchmove.magnifier",y):B.acEnabled?r(l)&&C.bind("mousemove.magnifier",y):l.bind("mousemove.magnifier",y))}var v=this,C=l.offsetParent(),R={detailImageUrl:l.attr("data-old-hires"),
location:"over",locationElement:l,prelaod:"ready",zIndex:50,offsetInClickZoom:50};z=a.extend(R,z);z.adjustment=[10,0,-10,0];var h=null,c=null,J=null,H=null,D=null,F={"null":1,"":1,undefined:1},w=!1,V=!1,X=z.detailImageUrl,T=z.useHoverZoomIpad||0,U=0,ha={},ca=function(){function b(a){var c=Math.round(Math.min(l.width(),h.rect.width/a));a=Math.round(Math.min(l.height(),h.rect.height/a));f.css({width:c,height:a});g=[c,a]}var c=this,g=[0,0],e=(h.detailSize&&h.detailSize[0]||5E8)/H[2],d=(h.detailSize&&
h.detailSize[1]||5E8)/H[3],e=d>e?d:e;a("#magnifierLens").remove();var f=a("\x3cdiv id\x3d'magnifierLens' /\x3e").css({position:"absolute"});z.generalImageUrls.zoomLensBackground&&f.css({backgroundImage:"url("+z.generalImageUrls.zoomLensBackground+")"});B.showMagnifierOnHover?m(f):f.css("cursor","pointer");c.updatePosition=function(){var a=[H[2]-g[0],H[3]-g[1]],h=0>=a[0]?.5:Math.max(0,Math.min(1,(J[0]-g[0]/2-H[0]-c.offset.left)/a[0])),b=0>=a[1]?.5:Math.max(0,Math.min(1,(J[1]-g[1]/2-H[1]-c.offset.top)/
a[1])),e=H[0]+Math.round(h*a[0]),a=H[1]+Math.round(b*a[1]);f.get(0).style.left=e+"px";f.get(0).style.top=a+"px";return[h,b]};c.destroy=function(){f.remove()};c.offset=l.offsetParent().offset();b(e);c.updatePosition();f.appendTo(l.parent());h.detailImage[0].complete||h.detailImage.load(function(){var a=h.detailImage.width()/H[2];b(a);c.updatePosition()})};ca.preload=function(){v.preload(z.generalImageUrls.lensBackgroundUrl)};var L=function(){function h(){var c={};if("over"===z.location){var c=z.useClickZoom,
g={},f=a("#leftCol"),k=a("#centerCol"),r=a("#rightCol"),q=a("#hover-zoom-end"),n=a("#actionPanelContainer"),t=b.isjQueryObjDefined(f)?f.outerHeight():k.outerHeight();g.top=b.isjQueryObjDefined(f)?f.offset().top:k.offset().top;g.bottom=t+g.top;g.right=b.isjQueryObjDefined(r)?r.offset().left:n.offset().left;g.left=c?0:f.offset().left+f.outerWidth();b.isjQueryObjDefined(q)&&q.offset().top>g.bottom&&(g.bottom=q.offset().top);c=g}else"right"===z.location&&(c=l.offset(),c={left:c.left+l.outerWidth(),top:c.top,
right:c.left+l.outerWidth()+400,bottom:c.top+400});z.minHeightElement&&(c.bottom=Math.max(c.bottom,c.top+a(z.minHeightElement).outerHeight()));c.bottom=Math.min(c.bottom,a(p).scrollTop()+a(p).height());c.left+=d[0];c.top+=d[1];c.right+=d[2];c.bottom+=d[3];c.width=c.right-c.left;c.height=c.bottom-c.top;z.enhancedHoverOverlay&&b.isDefined(p.pageXOffset)&&(g=a(p).width(),c.width=g-c.left+p.pageXOffset-18,c.height-=14);m.css({left:c.left,top:c.top,width:c.width,height:c.height});e.rect=c;return e}function c(a){var h=
new Image;e.detailSize=[0,0];h.onload=function(){e.detailSize=[h.width,h.height];g()};h.src=a.attr("src");if(0<h.width&&0<h.height)e.detailSize=[h.width,h.height];else if(z.detailImageSize)e.detailSize=z.detailImageSize;else{a=f(h.src);var b=H[2]/H[3];a.SS||a.AA?(a=a.SS||a.AA,e.detailSize=[a,a]):a.SX?e.detailSize=[a.SX,Math.round(a.SX/b)]:a.SY?e.detailSize=[Math.round(a.SY*b),a.SY]:a.SL&&(e.detailSize=1<=b?[a.SL,Math.round(a.SL/b)]:[Math.round(a.SL*b),a.SL])}}var e=this,d=z.adjustment;a("#zoomWindow").remove();
var k={overflow:"hidden",position:"absolute",backgroundColor:"white",zIndex:z.zIndex};z.enhancedHoverOverlay&&(k.boxShadow="0 6px 8px 2px rgba(0,0,0,.25)",k.border="1px solid #949494",k.borderColor="rgb(148,148,148)");var m=a("\x3cdiv id\x3d'zoomWindow' /\x3e").css(k);z.fadeMagnifier&&m.fadeIn(200);z.useClickZoom&&(O?m.css("cursor",'url("'+z.zoomOutIcon+'"), auto'):(m.css("cursor","-webkit-zoom-out"),m.css("cursor","-moz-zoom-out"),m.css("cursor","zoom-out")));e.updateImage=function(h){h=a("\x3cimg id\x3d'detailImg' src\x3d'"+
h+"'/\x3e").css("position","absolute");e.detailImage&&e.detailImage.remove();m.append(h);a(document).trigger("updated.magnifier");e.detailImage=h;c(e.detailImage)};e.refit=function(){h();c(e.detailImage);return e};z.fadeMagnifier?(e.show=function(){m.fadeIn(200);return e},e.hide=function(){m.fadeOut(200);return e}):(e.show=function(){m.show();return e},e.hide=function(){m.hide();return e});e.destroy=function(){m.remove();return e};e.getWindowSize=function(){return[e.rect.left,e.rect.top,e.rect.width,
e.rect.height]};e.updateImage(X);h();m.appendTo(document.body)},Y=!1,da,A=!1,ba;v.preload=function(c){c=a.makeArray(c);for(var h=c.length,b=0;b<h;b++)c[b]instanceof Array?v.preload(c[b]):"string"===typeof c[b]&&c[b]&&!F[c[b]]&&(F[c[b]]=new Image,F[c[b]].src=c[b])};v.changeImage=function(c,b){w&&x();X=b;l.attr("src",c);v.preload(c);H=[l.position().left,l.position().top,l.width(),l.height()];b&&("immediately"===z.preload?v.preload(b,!0):a(p).ready(function(){v.preload(b)}),h?h.updateImage(b):l.attr("data-old-hires",
b))};v.destroy=function(){B.acEnabled?C.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier"):l.unbind("touchstart touchstart.magnifier touchmove.magnifier mousemove.magnifier");a(document).unbind("mousemove.magnifier");c&&c.destroy();c=null;h&&h.destroy();h=null};v.detailImage=function(){return h.detailImage};v.suppressMagnifier=function(a){V=a};v.isEngaged=function(){return w};v.engageMagnifier=y;v.disengageMagnifier=x;l[0].complete?I():l.one("load",I);v.preload(l.attr("src"));
p.performance&&performance.now&&p.ue&&ue.count&&ue.count("MagnifierImageDownload",performance.now());if(z.preload){var ja=z.detailImageUrl,R=function(){v.preload(ja,!0);z.useClickZoom||ca.preload()},W=z.preload;W.constructor!==Array&&(W=[W]);for(var u=0;u<W.length;u++)if("immediately"===W[u])R();else if(a(p)[W[u]])a(p)[W[u]](R);else a(p).bind(W[u],R)}return v}function l(){if(B.useHoverZoom){var d={adjustment:[0,0,1,1],generalImageUrls:B.staticImages,location:"over",minHeightElement:"#imageBlock",
preload:"ready",zIndex:199,useHoverZoomIpad:B.useHoverZoomIpad,useHoverZoom:B.useHoverZoom,useClickZoom:B.useClickZoom,fadeMagnifier:B.fadeMagnifier,zoomOutIcon:B.staticImages.zoomOutCur,enhancedHoverOverlay:B.enhancedHoverOverlay||B.atfEnhancedHoverOverlay};C&&(C.destroy(),C=ea);var f=w.find(".image.item.selected:not(.mirai-shoppable-scene) img[data-old-hires]").not("[data-old-hires\x3d'']");b.isjQueryObjDefined(f)?B.useClickZoom?(f.one("click.loadmagnifier touchstart.loadmagnifier",function(a){C=
new I(f,d);C.engageMagnifier(a,!0)}),O?f.css("cursor",'url("'+B.staticImages.zoomInCur+'"), auto'):(f.css("cursor","-webkit-zoom-in"),f.css("cursor","-moz-zoom-in"),f.css("cursor","zoom-in"))):C=new I(f,d):n.isEnabled&&e.logHoverZoomApplicability(a,n)}}var R,B,F,v,C,w,O=navigator.userAgent.match(/msie|trident/i);return function(a,b,e,d){R=this;B=a;F=b;n.refToModel=F;v=d;R.render=function(a,b,e,g,d,f){w=e;C&&(C.destroy(),C=ea)};R.update=function(a){};v.register("loadMagnifier",l);v.register("resize",
l)}});"use strict";w.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockTwisterView",function(d,a,b,k){function n(a,e,d){a=(a=d?d:b.getColorFromState(e.getState().hovered_variations,f))&&""!==a?a:f.defaultColor;l.dispatch("updateView",{type:"swatchHover",data:{color:a}});k.postCountMetric("swatchHover")}function e(a,e,d,m){a=(a=m?m:b.getColorFromState(e.getState().selected_variations,f))&&""!==a?a:f.defaultColor;a===I.getCurrentItem().color?"function"===typeof d&&d():(l.dispatch("updateSelection",
{type:"swatchClick",data:{color:a},onload:function(){var a={hasComponents:!0,components:[{name:"mainImage"}]};"function"===typeof p.markFeatureRender&&p.markFeatureRender("imageblock",a);d()}}),k.postCountMetric("swatchClick"))}var m,f,I,l;return function(a,b,k,v){m=this;f=a;I=b;l=v;d.on("image-block-twister-swatch-hover",n);d.on("image-block-twister-swatch-click",e);m.render=function(a,b,e,d,f){};m.update=function(a){}}});"use strict";w.when("A","jQuery","Airy","imageBlockUtils","ImageBlockLoader",
"postMetric","vse_ns_videoPlayer").register("ImageBlockVideoView",function(d,a,b,k,n,e,m){function f(c,h,b,e){!g.autoplayVideo||T||g.useChromelessVideoPlayer?!k.isjQueryObjDefined(c.find(".a-button-selected"))&&(b=r.getCurrentItem(),!e||g.prioritizeVideos||"chromeless-video"===b.type&&g.autoplayVideo)&&(e=k.getVideoHash(b.color,0,g),-1!==e&&(h+=0,t.dispatch("updateModel",{data:{index:0,thumbnailIndex:h,variant:e.variant,type:g.useChromelessVideoPlayer?"chromeless-video":"chromeful-video"}}),h=c.find(".item").get(h),
k.selectGivenThumbnail(a(h),c))):(k.selectGivenThumbnail(c.find("img:last"),c),k.fadeToThumbnail(c.find("img").length-1,M,c))}function I(a){var c=r.getCurrentItem().color;if(g.useChildVideos&&!g.colorToVideo[c]){var h=function(){if(a){g.colorToVideo[c]=a;var h={type:"updatedData",data:r.getCurrentItem()};t.dispatch("updateView",h)}};g.lazyLoadExperienceDisabled?h():w.when(k.rankedImagesReadyEvent(g.colorToAsin[c].asin)).execute(function(){h()})}}function l(a){if(!g.useChildVideos)return k.lazyLoadingRequired(r.getCurrentItem(),
r,g)?void 0:g.videos;if(g.colorToVideo[a])return g.colorToVideo[a];var c=g.colorToAsin[a];if(c&&c.asin){var h={};h.params={asin:c.asin,productGroupID:g.productGroupID,useAiryVideoPlayer:!0,useChromelessVideoPlayer:g.useChromelessVideoPlayer,isUDP:g.isUDP};g.isDPXFeatureEnabled||(h.success=function(a){I(a)},n.load("/gp/product/features/apparel-main-image/videos.html",h));return g.colorToVideo&&g.colorToVideo[a]}}function R(){E&&(E.hide(),x.parent().css("z-index",-1),y.hide())}function B(){t.dispatch("selectThumbnail",
k.useTabbedImmersiveView(g)?1:0)}function F(c,h,g,d){return b.embed({isShowFirstFrameWhenReadyEnabled:!0,parentElement:c[0],streamingUrls:h.url,swfUrl:g.swfUrl,foresterMetadataParams:g.foresterMetadataParams,backgroundColor:"transparent",flashParams:{wmode:"transparent"},experiments:{supportChromelessPlayback:!0},bindings:{canplay:function(){var a=k.isjQueryObjDefined(c.find("video"))?"HTML5":"FLASH";e.postCountMetric("dppc_chromelessVideo:"+a)},playing:function(){c.parent().css("z-index",8)},videounsupported:function(){B();
e.postCountMetric("dppc_chromelessVideo:VIDEO_UNSUPPORTED")},error:function(){B();e.postCountMetric("dppc_chromelessVideo:ERROR")},ended:function(){E.seek(0)}},cuePoints:[{values:h.durationSeconds-1,type:"position",callback:function(h,b,e){h=e.durationSeconds-e.playheadTimeSeconds;c.parent().css("background-color","white").find(".airy-renderer-container").fadeTo(1E3*h,.1,function(){c.parent().css({"background-color":"transparent","z-index":-1});B();a(this).show().css("opacity",1)})}}]})}function v(c){if("chromeful-video"===
c.type||"chromeless-video"===c.type){var b=k.getVideoHash(c.color,c.index,g);if(-1===b)return-1;if("chromeful-video"===c.type){c=c.thumbnailIndex+1;var e=M.width()/M.height(),f=parseInt(b.videoWidth,10),m=parseInt(b.videoHeight,10);k.updateAspectRatio(e,f,m,x);E?(E.show(),k.loadMediaIntoAiry(E,b,P,g.tabletWeb)):E=g.tabletWeb?J:k.createAiryInstanceForChromefulNotUseTabbedImmersiveView(x,b,P,null,g.autoplayVideo,M,y,q,c,g.useTabbedImmersiveView,D,H,K);b:if(k.useTabbedImmersiveView(g)){if(1<k.getVideosCount(r.getCurrentItem().color,
g)){if(k.isDefined(G)){y.show();break b}G=a('\x3ca class\x3d"more-videos"\x3e\x3c/a\x3e').attr("href","#").text(g.staticStrings.watchMoreVideos);y.find("#videoCaption").append(G);d.declarative.create(G,"videoIngressClick",h)}k.playVideoInImmersiveView(g,r.getCurrentItem().color)&&(d.declarative.create(x,"videoIngressClick",h),x.attr&&x.attr("data-ux-click",""),x.children().css("z-index","-1"),x.css("display","inline-block"))}else y.find("#videoCaption").text(g.staticStrings.playVideo),y.show();b=
E;g.autoplayVideo&&b&&!T&&(k.toggleVideoCaption(y),b.setVolume(0),b.show(),b.play(),T=!0)}else E?(E.show(),k.loadMediaIntoAiry(E,b,P,g.tabletWeb),E.play(),y.show()):(E=F(x,b,P))&&E.play()}}function C(c,b,m){var r=l(b);b=c;var n=k.isDefined(r)&&0<r.length&&g.alwaysIncludeVideo?1:0;k.isDefined(r)&&0<r.length&&!g.alwaysIncludeVideo&&c===g.maxAlts&&e.postCountMetric("IBVideoDrop");n&&c===g.maxAlts&&(q.find(".item:last").remove(),c--);k.isDefined(r)&&(a.each(r,function(b,d){if(c<g.maxAlts){var f=g.useChromelessVideoPlayer?
"chromeless-video":"chromeful-video",m={type:f,index:b,thumbnailIndex:c,variant:d.variant};h={type:"video-ingress",index:b,thumbnailIndex:c,variant:d.variant};k.useTabbedImmersiveView(g)&&("chromeful-video"===f&&(U+=" videoBlockIngress  videoBlockDarkIngress",d.thumb=d.thumb.replace("_PKmb-play-button-overlay-thumb","")),g.altsOnLeft||(U+=" a-align-top"));k.createThumbnail(m,d.thumb,q,U);if(2===g.dp60VideoPosition){var n=q,m=g.dp60VideoPosition;if(0!==m){var l=n.children(".imageThumbnail"),n=n.children(".videoBlockIngress");
l&&n&&l[m-1]&&a(l[m-1]).before(n[0])}}k.useTabbedImmersiveView(g)&&(L(q.find(".videoBlockIngress img"),g.videoIngressATFSlateThumbURL),m=1<r.length?"multiple-videos":"one-video",(l=1<r.length?r.length+" "+g.staticStrings.multipleVideos:g.staticStrings.singleVideo)&&q.find(".videoBlockIngress").append(q.find("#videoCount_template").clone().text(l).attr("id","videoCount")).addClass(m));m=e.buildNexusMetric("ib.thumbnailImpression",c+1,d.mediaObjectId,d.groupType,D,H,K,S);e.emitNexusMetric(m);m=e.buildNexusMetric("ib.thumbnailRender",
c+1,d.mediaObjectId,d.groupType,D,H,K,S);e.emitNexusMetric(m);X||(X=!0,e.postCountMetric("chromeless-video"===f?"dppc_chromelessVideoAvailable":"dppc_chromefulVideoAvailable"));c++}if(k.useTabbedImmersiveView(g))return!1}),f(q,b,c,m),g.imageBlockRenderingStartTime&&e.postTimeMetric("vse_desktop_ib_video_ingress_enable_duration",d.now()-g.imageBlockRenderingStartTime));return c}function L(a,c){var b=a.attr("src");if(b&&c){a.attr("src",c);var h=new Image;h.onload=function(c){a.attr("src",b)};h.src=
b}}function O(a){E&&E.pause();a.data=h;a.clickTimeStamp=a.$event.timeStamp;var c="a"===a.targetTag?"dpcc_videoIngressLink":"dpcc_videoIngressSlate";t.dispatch("imageClick",a);e.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp);a=e.buildNexusMetric("ib.thumbnailClick",a.data.thumbnailIndex+1,g.videos[0].mediaObjectId,g.videos[0].groupType,D,H,K,S);e.emitNexusMetric(a);e.postCountMetric(c)}function N(a){J=a.player;J.hide=function(){J.pause();d.$("#main-video-container").find(".vse-player-container").hide()};
J.show=function(){d.$("#main-video-container").find(".vse-player-container").show();J.play()};J.getMediaSourceInfo=function(){return k.getMediaSourceInfo()}}var z,g,r,t,q,x,y,M,G,E,P,h,c,J,H,D,K,S,V,X=!1,T=!1,U="videoThumbnail";return function(b,f,n,l){z=this;g=b;r=f;t=l;P=g.airyConfig;K=g.contentWeblab&&g.contentWeblab+":"+g.contentWeblabTreatment;g.colorToVideo={};g.colorToVideo[g.landingAsinColor]=g.colorToVideo[g.defaultColor]=g.videos;g.tabletWeb?(V="tablet",S="applicationType.ImageBlock.vse_ib_tablet_web"):
d.capabilities.tablet?(V="tablet",d.capabilities.isAmazonApp&&(S="applicationType.ImageBlock.vse_ib_tablet_app")):(V="desktop",S="desktop_web.ImageBlock.vse_ib_iv");z.render=function(b,h,e,f,n,l){R();q=f;x=n.find("#main-video-container");y=x.parent().find("#video-canvas-caption");M=a("#main-image-container");D=p.location.href;e=r.getCurrentItem().color;!0===l?H=g.mediaAsin:(H=g.colorToAsin[e]&&g.colorToAsin[e].asin,H=k.isDefined(H)?H:g.mediaAsin);g.useChromelessVideoPlayer||x.addClass("chromeful-container");
c=C(h,b,l);v(r.getCurrentItem());k.useTabbedImmersiveView(g)&&d.declarative("videoIngressClick",["click"],O);e=r.getCurrentItem().color;b=k.getVideoHash(e,0,g);-1!==b&&g.tabletWeb&&(b=k.getNilgiriServiceAjaxRequest(g,e,b),m.get(d,"#main-video-container",b,function(){d.$("#main-video-container").find(".vse-player-container").hide()},function(){d.$("#imageBlock #altImages ul").find("li.videoThumbnail").hide()}));return c};z.update=function(a){var b=a.data;"ingress"===b.type||k.lazyLoadingRequired(b,
r,g)||R();if("swatchHover"===a.type)b.color===r.getCurrentItem().color?v(r.getCurrentItem()):a.captured||k.lazyLoadingRequired(b,r,g)&&!k.lazyLoadOnHoverEnabled(g)&&v(r.getCurrentItem());else if("chromeful-video"===b.type||"chromeless-video"===b.type){var f=k.getVideoHash(b.color,b.index,g);if("mouseenter"===a.type&&(e.postCountMetric("dpcc_videoThumbHovered_"+(b.thumbnailIndex+1)+"_"+c),"chromeless-video"===b.type)){var m=e.buildNexusMetric("ib.thumbnailHover",b.thumbnailIndex+1,f.mediaObjectId,
f.groupType,D,H,K,S);e.emitNexusMetric(m)}v(b);g.usePeekHover&&"click"!==a.type||!d.$(a.$currentTarget).closest("li").hasClass("videoThumbnail")||(k.selectGivenThumbnail(a.$declarativeParent,q),"click"===a.type&&(f=e.buildNexusMetric("ib.thumbnailClick",b.thumbnailIndex+1,f.mediaObjectId,f.groupType,D,H,K,S),(!k.useTabbedImmersiveView(g)&&"chromeless-video"===b.type||"tablet"==V)&&e.emitNexusMetric(f),k.useTabbedImmersiveView(g)&&(e.emitNexusMetric(f),e.postCountMetric("dpcc_videoThumbClicked_"+(b.thumbnailIndex+
1)+"_"+c),h.action="videoIngressClick",h.clickTimeStamp=a.$event.timeStamp,h.$event=a.$event,h.$currentTarget=a.$currentTarget,t.dispatch("videoIngressClick",h),e.postTimeMetric("dpcc_vse_videoingressclick",a.$event.timeStamp))))}};if(g.isDPXFeatureEnabled)d.on("triggerVideoAjax",I);d.on("vsePlayer-imageblock_tablet",N)}});"use strict";w.when("A","jQuery","imageBlockUtils","ImageBlockLoader","postMetric","logFailedInteractionMetric","postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveView",
function(d,a,b,k,n,e,m,f){function I(a){return a.hiRes||a.large||a.main[a.main.length-1]}function l(){u.find("#ivTitle").click(function(){W.hide()})}function R(){Q=Pa?{type:"360-spin"}:ba.getCurrentItem()}function B(){var a=u.find("#ivStage"),c=W.$container.find(".a-popover-wrapper"),b=c.find(".a-popover-inner"),c=c.height()-f.getDimension(b,"padding-top")-f.getDimension(b,"padding-bottom");u.css("height",c);var b=u.find("#ivTitle").outerHeight(!0),h=u.find("#ivVariationSelection").outerHeight(!0),
e=u.find("#ivMediaSelection").outerHeight(!0),d=u.find("#ivThumbs"),g=f.getDimension(d,"margin-top")+f.getDimension(d,"margin-bottom");d.css("height",c-b-h-e-g);u.find("#ivLargeImage").css("height",c);a.css("width",u.width()-f.getDimension(u,"padding-left")-f.getDimension(u,"padding-right")-u.find("#ivThumbColumn").width()-f.getDimension(a,"margin-left")-f.getDimension(a,"margin-right"))}function F(){u.find("#ivMediaSelect").change(function(){var c=a(this).val();"all"===c?(u.find("#ivVideoList").hide(),
u.find("#ivThumbs").show(),u.find(".ivThumbVideo").show(),"chromeful-video"===Q.type&&u.find("#ivVideo_"+Q.index).click()):"images"===c?(u.find("#ivVideoList").hide(),u.find("#ivThumbs").show(),u.find(".ivThumbVideo").hide(),"chromeful-video"===Q.type&&(0===fa&&0===aa?u.find("#iv360").click():0===fa?u.find("#ivHeroImage_0").click():u.find("#ivImage_0").click())):"videos"===c&&(u.find("#ivVideoList").show(),u.find("#ivThumbs").hide(),"chromeful-video"!==Q.type?u.find("#ivVideoList_0").click():u.find("#ivVideoList_"+
Q.index).click())})}function v(){var a=u.find("#ivStage").find("#ivLargeImage"),c=a.width(),b=a.height(),h=a.find(".fullscreen");h.removeAttr("style");var e=h.width(),d=h.height();0<h.length&&(h[0].naturalWidth&&(e=h[0].naturalWidth),h[0].naturalHeight&&(d=h[0].naturalHeight));a.css("cursor","auto");var e=0===e?1:e,d=0===d?1:d,g=Math.min(c/e,b/d),f=d*g,m=e*g;1>g?(Qa?a.css("cursor","url('"+A.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor",
"zoom-in")),za=!0):za=!1;e=Math.min(m,e);d=Math.min(f-20,d);h.css({"margin-top":(b-d)/2,"margin-left":(c-e)/2,height:d,width:e});a.css("visibility","visible");Aa=!1}function C(a){var c=u.find("#ivLargeImage");c.css("visibility","hidden");c.empty();f.animateStageIn(c);c.append(a);v()}function L(){ga&&ga.pause();u.find("#ivLarge360").css("display","none");u.find("#ivLargeVideo").css("display","none");u.find("#ivLargeImage").css("display","none");q()}function O(c){L();u.find("#ivLargeImage").css("display",
"block");var h;"hero-image"===c?b.isDefined(ka)&&(h=I(ka[Q.index])):b.isDefined(la)&&(h=I(la[Q.index]));if(b.isDefined(h)){u.find(".fullscreen").remove();var e=a("\x3cimg\x3e").attr("src",h).addClass("fullscreen"),d=u.find("#ivLargeImage");f.animateStageOut(d,function(){e.load(function(){C(e)});if(e[0].complete)C(e);else{d.empty();var c=(d.height()-104)/2,b=(d.width()-80)/2;a("\x3cimg\x3e").attr("src",A.staticImages.spinner).css({position:"relative",top:c+"px",left:b+"px"}).appendTo(d)}})}}function N(){var a=
parseInt(Q.index,10)+1;a>=ia.length||u.find("#ivVideo_"+a).click()}function z(){var a;b.isDefined(ia)&&(a=ia[Q.index]);if(b.isDefined(a)){L();var c=u.find("#ivLargeVideo").css("display","block");ga?(ga.isDetached()&&ga.attach(c[0]),b.loadMediaIntoAiry(ga,a,wa,A.tabletWeb),ga.show()):(ga=b.createAiryInstanceForChromeful(c,a,wa,"ImmersiveView"),wa.enableContinuousPlay&&ga.bind("ended",N));ga.play({isAsync:!0})}}function g(){R();var a;a="hero-image"===Q.type?u.find("#ivHeroImage_"+Q.index):"image"===
Q.type?u.find("#ivImage_"+Q.index):"chromeful-video"===Q.type||"chromeless-video"===Q.type?u.find("#ivVideo_"+Q.index):"360-spin"===Q.type?u.find("#iv360"):b.isDefined(ka)?u.find("#ivHeroImage_"+Q.index):u.find("#ivImage_"+Q.index);b.isjQueryObjDefined(a)||(a=u.find("#ivImage_0"));r(a)}function r(a){u.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivThumbVideo")?(Q.type="chromeful-video",Q.index=a.attr("id").split("_")[1],z()):a.hasClass("ivHeroImage")?(Q.type="hero-image",
Q.index=a.attr("id").split("_")[1],O(Q.type)):a.hasClass("iv360Image")?(Q.type="360-spin",Q.index=0,t()):(Q.type="image",Q.index=a.attr("id").split("_")[1],O(Q.type))}function t(){L();u.find("#ivLarge360").css("display","block");E();var a=u.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});f.animateStageIn(a)},200);y();n.postCountMetric("dppc_click360");sa=Date.now()}function q(){0<sa&&(x("dppc_duration360",Date.now()-sa),sa=0)}function x(a,c){p.ue&&p.ue.count(a,c)}
function y(){if(0<pa){var a=u.find(".iv360Hint");a.removeClass("iv360HintFaded");a.animate({opacity:1},200)}}function M(c,b){if(pa<c.length){var h=a("\x3cimg /\x3e").css({display:"block",width:6*na+"px",height:ra+"px"});h.hide();b.append(h);h.get(0).onload=function(){b.closest(document.documentElement).length&&(pa++,1===pa&&(y(),0<sa&&x("dppc_loadTime360",Date.now()-sa)),0<Ga&&x("dppc_perSpriteloadTime360",Date.now()-Ga),u.find("#iv360Spinner").hide(),h.show(),xa=5*Z.imageLocations[Math.floor(ya/
Z.imageLocations[0].length)][ya%Z.imageLocations[0].length],M(c,b))};h.attr("src",c[pa].replace(/(\._SP)\d+(,)\d+/,"$1"+ta+"$2"+ua));Ga=Date.now()}}function G(a){if(b.isDefined(Z.spriteWidthSizes)&&0<Z.spriteWidthSizes.length){var c=Z.spriteWidthSizes,h=c.length,e=c[0],d=c[h-1];if(a<=e)return e;if(a>d)return d;for(e=0;e<h;e++)if(a>c[e]&&a<=c[e+1])return c[e+1]}else return a}function E(){var c=u.find("#ivLarge360");c.children("#image-360-sprites").length||(c.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),
c.css({"margin-left":0,"margin-top":0,width:c.parent().width(),height:c.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",A.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(c),Ha=!0,P())}function P(){if(b.isDefined(Z.spriteURLs)&&b.isDefined(u)&&Ha&&!Ia){var e=u.find("#ivLarge360"),
d=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});b.isDefined(Z.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",Z.staticImages.hint360).appendTo(d);a("\x3cdiv\x3e").css({"text-align":"center"}).text(A.staticStrings.dragToSpin).appendTo(d);d.appendTo(e);var d=Z.imageWidth,g=Z.imageHeight,f=e.parent().width(),m=e.parent().height(),k=0,r=0;d/g>f/m?(ta=G(f),ua=Math.round(g/
d*ta),na=Math.ceil(f),ra=Math.ceil(ua/ta*f),r=(m-ra)/2):(ua=G(m),ta=Math.round(d/g*ua),ra=Math.ceil(m),na=Math.ceil(ta/ua*m),k=(f-na)/2);e.css({"margin-left":k,"margin-top":r,width:na+"px",height:ra+"px",overflow:"hidden",position:"relative"});e.children("#image-360-sprites").css("width",6*na+"px");M(Z.spriteURLs,u.find("#image-360-sprites"),0);d=u.find("#ivLarge360");d.bind("mousedown",H);d.bind("touchstart",h);d.bind("touchmove",c);d.bind("touchend",J);a(document).bind("mousemove",D);a(document).bind("mouseup",
K);b.isDefined(A.staticImages.grab)&&e.css("cursor","url('"+A.staticImages.grab+"'), auto");Ia=!0}}function h(a){Ba=!0;Ja=a.originalEvent.targetTouches[0].clientX}function c(a){Ba&&(S(a.originalEvent.targetTouches[0].clientX-Ja),Ja=a.originalEvent.targetTouches[0].clientX)}function J(a){Ba&&(Ba=!1)}function H(a){Ca=!0;Ka=a.originalEvent.clientX;b.isDefined(A.staticImages.grabbing)&&(a=u.find("#ivLarge360"),a.css("cursor","url('"+A.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor",
"url('"+A.staticImages.grabbing+"'), auto"));return!1}function D(a){Ca&&(S(a.originalEvent.clientX-Ka),Ka=a.originalEvent.clientX)}function K(a){Ca&&(Ca=!1,b.isDefined(A.staticImages.grab)&&(a=u.find("#ivLarge360"),a.css("cursor","url('"+A.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function S(a){for(a=xa-=a/na*180;0>a;)a+=360;for(;360<a;)a-=360;xa=a;var c;a=360;for(var h=0;h<pa;h++)for(var e=0;e<Z.imageLocations[h].length;e++){var d=Math.abs(xa-5*Z.imageLocations[h][e]);
d<a&&(a=d,c=h*Z.imageLocations[0].length+e)}c!==ya&&(a=Math.floor(c/Z.imageLocations[0].length),a!==Math.floor(ya/Z.imageLocations[0].length)&&(b.isDefined(La)||(La=document.createElement("canvas").getContext("2d")),h=u.find("#image-360-sprites").children(),La.drawImage(h[a],0,0)),a=u.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));ya=c;a=c%Z.imageLocations[0].length*-1*na;c=-1*Math.floor(c/Z.imageLocations[0].length)*ra;h=u.find("#ivLarge360").children("#image-360-sprites");
h.css("-webkit-transform","translate3d("+a+"px, "+c+"px, 0)");h.css("transform","translate3d("+a+"px, "+c+"px, 0)")}function V(){u.delegate(".ivThumb","click",function(){var c=a(this);r(c)});u.delegate(".ivThumbVideoListOuter","click",function(){u.find(".ivThumbVideoListOuter").removeClass("selected");var c=a(this);c.addClass("selected");Q.type="chromeful-video";Q.index=c.attr("id").split("_")[1];z()})}function X(){ga&&!ga.isDetached()&&(wa.volume=ga.getVolume(),ga.detach(),!document.all||p.atob||
document.addEventListener||(ga=null));u.find("#ivLargeImage").empty();q()}function T(a,c){return 0<c?c/2:Math.min(0,Math.max(c,a))}function U(c){var b=qa.left-(c.pageX-Da[0])*Ea;d.capabilities.rtl&&(b=qa.left-(a(p).width()-c.pageX-Da[0])*Ea);c=qa.top-(c.pageY-Da[1])*Ea;b=T(b,Fa.left);c=T(c,Fa.top);u.find(".fullscreen").css({left:b,top:c})}function ha(){u.delegate("#ivLargeImage","click",function(a){if(Aa)v();else if(za){u.find(".fullscreen").removeAttr("style");if(za){var c=u.find("#ivLargeImage"),
b=c.find(".fullscreen");Qa?c.css("cursor","url('"+A.staticImages.zoomOut+"'), auto"):(c.css("cursor","-webkit-zoom-out"),c.css("cursor","-moz-zoom-out"),c.css("cursor","zoom-out"));Aa=!0;var h=u.find("#ivLargeImage");Fa.left=h.width()-b.width();Fa.top=h.height()-b.height();var h=c.height()/2,e=c.width()/2;Da=[c.offset().left+e,c.offset().top+h];qa.top=h-b.height()/2;qa.left=e-b.width()/2;b.css({position:"relative",left:qa.left,top:qa.top});Ea=Math.max(b.height()/c.height(),b.width()/c.width())}U(a)}});
u.delegate("#ivLargeImage","mousemove",function(a){Aa&&U(a)})}function ca(c){if(b.isImmersiveViewEnabled(A,ba.getCurrentItem().color))if(Ma){var h=c.$event.originalEvent;h.acknowledge&&h.acknowledge(c.$currentTarget[0]);Pa=b.isDefined(c)&&"button-360-click"===c.action;e.isEnabled&&m.logImmersiveViewRequestServed(e);n.postCountMetric("dppc_immersiveViewOpened");if(b.isDefined(W))W.show();else{c=a("#auiImmersiveViewDiv");var h=a(p).height()-150,g=a(p).width()-75;W=Ma.create(c,{name:"immersiveView",
activate:"onclick",width:g,height:h,popoverLabel:"ImmersiveView",hideHeader:!0});c.click()}if(Na){u=a("#ivMain");c=ba.getCurrentItem().color;la=A.colorImages[c];ka=A.heroImage[c];ia=A.useChildVideos?A.colorToVideo[c]:A.videos;Oa=Y()&&A.spin360ColorEnabled[c];Z=Y()?A.spin360ColorData[c]:ea;R();ma=aa=oa=fa=0;b.isDefined(ka)&&(aa=ka.length);b.isDefined(la)&&(fa=la.length);b.isDefined(ia)&&(oa=ia.length);Oa&&(ma=1);f.populateTitle(u.find("#ivTitle"),45,A);f.populateVariationSelection(u.find("#ivVariationSelection"));
c=u.find("#ivMediaSelect");0===fa+ma||0===oa?(c.parent().hide(),u.find("#ivThumbs").addClass("noMediaSelection")):(c.empty(),a("\x3coption/\x3e").attr("value","all").prop("selected",!0).text(A.staticStrings.allMedia+" ("+(aa+fa+ma+oa)+")").appendTo(c),a("\x3coption/\x3e").attr("value","images").text(A.staticStrings.images+" ("+(aa+fa+ma)+")").appendTo(c),a("\x3coption/\x3e").attr("value","videos").text(A.staticStrings.videos+" ("+oa+")").appendTo(c),c.parent().show(),c.val("all"));c=u.find("#ivThumbs");
c.find(".ivRow").not(".placeholder").remove();for(var h=aa+fa+oa+ma,k=g=0;g<h;)for(var r=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),l=0;3>l&&g<h;l++,g++,k++)if(k<aa){var q=ka[g].thumb,t=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr("id","ivHeroImage_"+g).appendTo(r);t.find(".ivThumbImage").css("background",'url("'+f.getResizedThumbnailURL(q)+'") center no-repeat')}else if(k>=aa&&k<fa+aa)q=la[g-aa].thumb,t=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr("id",
"ivImage_"+(g-aa)).appendTo(r),t.find(".ivThumbImage").css("background",'url("'+f.getResizedThumbnailURL(q)+'") center no-repeat');else if(k>=aa+fa&&k<fa+aa+ma)t=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("iv360Image").attr("id","iv360").appendTo(r),t.find(".ivThumbImage").css("background",'url("'+(b.isDefined(A.staticImages.icon360)?f.getResizedThumbnailURL(A.staticImages.icon360,!0):"")+'") center no-repeat');else if(q=ia[g-fa-aa-ma],t=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivThumbVideo").attr("id",
"ivVideo_"+(g-fa-aa-ma)).appendTo(r),t.find(".ivThumbImage").css("background",'url("'+q.thumbUrl+'") center no-repeat'),b.isDefined(q)){var J={position:"triggerTop"},x=u.find("#ivThumbs").find(".ivThumbVideoPopover.placeholder").clone().removeClass("placeholder");x.find(".ivVideoPopoverTitle").text(q.title);x.find(".ivVideoPopoverDuration").text(q.durationTimestamp);J.inlineContent=x[0];d.declarative.create(t,"a-tooltip",J)}c=u.find("#ivVideoList");c.find(".ivThumbVideoListOuter").not(".placeholder").remove();
h=c.find(".placeholder");for(g=0;g<oa;g++)k=ia[g],r=h.clone().removeClass("placeholder").appendTo(c),r.attr("id","ivVideoList_"+g),r.find(".ivThumbImage").css("background",'url("'+k.thumbUrl+'") center no-repeat'),r.find(".ivThumbTitle").text(k.title),r.find(".ivThumbDuration").text(k.durationTimestamp);u.find("#ivLarge360").empty();pa=0;Ia=Ha=!1;wa=A.airyConfig;Na=!1;Ra()}}else p.performance&&performance.now&&p.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||
0)+1);else n.postCountMetric("immersiveViewNotExistsClickCount")}function va(a){var c=A.colorToAsin[a],h={},e=500;if(c&&c.asin){h.params={asin:c.asin};var d="360"+c.asin,g=Date.now();h.success=function(c){x("dppc_asyncRequestTime360",Date.now()-g);c&&b.isDefined(c.spin360.spin360Model)?(b.ajaxState(d,"success"),A.spin360ColorData[a]=c.spin360.spin360Model,a===ba.getCurrentItem().color&&(Z=A.spin360ColorData[a],P())):h.error()};h.error=function(){n.postCountMetric("dppc_asyncFailed360");x("dppc_asyncRequestTime360",
Date.now()-g);e*=2;16E3>=e?setTimeout(function(){g=Date.now();k.load("/gp/product/features/apparel-main-image/360.html",h)},e):b.ajaxState(d,"fail")};b.ajaxState(d)&&"fail"!==b.ajaxState(d)||(k.load("/gp/product/features/apparel-main-image/360.html",h),b.ajaxState(d,"sent"))}}function Y(){return b.isDefined(A.spin360ConfigEnabled)&&A.spin360ConfigEnabled}var da,A,ba,ja,W,u,ka,la,ia,aa,fa,oa,ma,Q,ga,wa,Z,Oa,na,ra,ua,ta,Ka,Ja,Pa=!1,Ha=!1,Ia=!1,xa=0,ya=0,sa=0,Ga=0,Ca=!1,Ba=!1,pa=0,La,Qa=navigator.userAgent.match(/msie|trident/i),
Na=!0,Aa=!1,za=!1,Fa={},qa={},Ea,Da,Ma;w.when("a-modal").execute(function(a){Ma=a});var Ra=d.once(function(){F();V();ha();d.on("a:popover:afterUpdatePosition:immersiveView",B);d.on("a:popover:afterShow:immersiveView",g);d.on("a:popover:afterHide:immersiveView",X);l()});return function(c,h,g,k){da=this;A=c;ba=h;e.refToModel=ba;ja=k;Y()&&(A.spin360ColorData[A.landingAsinColor]=A.spin360ColorData[A.defaultColor],A.spin360ColorEnabled[A.landingAsinColor]=A.spin360ColorEnabled[A.defaultColor]);b.isDefined(A.staticImages.icon360)&&
a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",f.addStyleCodeToURL(A.staticImages.icon360,"_FMpng_RI_"));da.render=function(a,c,h,e,g,f){Na=!0;Y()&&A.spin360ColorEnabled[a]&&!b.isDefined(A.spin360ColorData[a])&&(A.spin360ColorData[a]={},va(a));b.isImmersiveViewEnabled(A,ba.getCurrentItem().color)&&Y()&&A.spin360ColorEnabled[a]&&(c===A.maxAlts&&(a=e.find(".item.imageThumbnail"),h=e.find(".item.videoThumbnail"),b.isDefined(h)&&1<h.length?h.last().remove():a.last().remove(),
c--),a=e.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),d.declarative.create(a,"button-360-click"),e.append(a),c++,n.postCountMetric("dppc_display360"));return c};da.update=function(a){};b.isImmersiveViewEnabled(A,ba.getCurrentItem().color)||b.addTag("immersiveViewNotAvailable");ja.register("imageClick",ca);ja.register("button360Click",ca)}});"use strict";w.when("A","jQuery","imageBlockUtils","postMetric","logFailedInteractionMetric",
"postEarlyMetric","imageBlockImmersiveViewUtils").register("ImageBlockTabbedImmersiveView",function(d,a,b,k,n,e,m){function f(){var b=F.getImmersiveViewModalInstance().$container.find(".a-popover-wrapper"),e=b.find(".a-popover-inner"),b=b.height()-m.getDimension(e,"padding-top")-m.getDimension(e,"padding-bottom");a("#iv-tab-view-container").css("height",b);L=a("#iv-tab-view-container ul.iv-tab-views li").filter(function(){return"none"!==a(this).css("display")}).length;1<L?(a("#iv-tab-view-container ul.iv-tab-views li").parent().show(),
e=a("#iv-tab-view-container ul.iv-tab-views li").parent().height(),b-=e):a("#iv-tab-view-container ul.iv-tab-views li").parent().hide();a("#iv-tab-view-container .iv-tab-content").css("height",b);d.trigger("dp:image-block:immersive-view:resize")}function I(){d.trigger("dp:image-block:immersive-view:reset")}function l(g){if(b.isImmersiveViewEnabled(B,F.getCurrentItem().color))if(N){var f=g.$event.originalEvent;f.acknowledge&&f.acknowledge(g.$currentTarget[0]);n.isEnabled&&e.logImmersiveViewRequestServed(n);
k.postCountMetric("dppc_immersiveViewOpened");b.isDefined(g)&&("button-360-click"===g.action?a("#iv360TabHeading").click():"videoIngressClick"===g.action?(O=g.clickTimeStamp,a("#ivVideosTabHeading").click()):"showroomIngressClick"===g.action?(O=g.clickTimeStamp,a("#ivShowroomTabHeading").click()):a("#ivImagesTabHeading").click());f=F.getImmersiveViewModalInstance();if(b.isDefined(f))f.show();else{g=a("#auiImmersiveViewDiv");var f=Math.min(Math.max(a(p).height()-150,540),1080),m=Math.min(Math.max(a(p).width()-
75,990),1980),f=N.create(g,{name:"immersiveView",activate:"onclick",width:m,height:f,popoverLabel:"ImmersiveView",hideHeader:!0});F.setImmersiveViewModalInstance(f);g.click()}C&&(C=!1,z(),d.trigger("dp:image-block:immersive-view:init"))}else p.performance&&performance.now&&p.ue&&ue.count&&ue.count("DPIBClickFailedInteractionCount",(ue.count("DPIBClickFailedInteractionCount")||0)+1);else k.postCountMetric("immersiveViewNotExistsClickCount")}var R,B,F,v,C=!0,L=0,O,N;w.when("a-modal").execute(function(a){N=
a});var z=d.once(function(){d.on("a:popover:afterUpdatePosition:immersiveView",f);d.on("a:popover:afterShow:immersiveView",f);d.on("a:popover:afterHide:immersiveView",I)}),g=d.once(function(){var b=a("#iv-tab-view-container ul.iv-tab-views li");b.bind("click",function(e){var g=b.filter(".iv-active");g.attr("id")!==a(this).attr("id")&&d.trigger("dp:ivTabs:"+g.find("a").attr("data-iv-tab-view")+":deselect",e);b.removeClass("iv-active");a(this).addClass("iv-active");a("#iv-tab-view-container .iv-tab-content").hide();
g=a(this).find("a").attr("data-iv-tab-view");a("#"+g).show();"ivVideosTab"===g&&(e.clickTimeStamp=O||e.timeStamp);d.trigger("dp:ivTabs:"+g+":select",e);k.postCountMetric("dppc_"+g);return!1})});return function(a,e,d,f){R=this;B=a;F=e;n.refToModel=F;v=f;R.render=function(a,b,e,g,d,h){k.postCountMetric("dpcc_altThumbs_"+b);C=!0};R.update=function(a){};R.getTitle=function(){};R.getVariationSelectionInfo=function(){};g();b.isImmersiveViewEnabled(B,F.getCurrentItem().color)||b.addTag("immersiveViewNotAvailable");
v.register("imageClick",l);v.register("button360Click",l);b.useTabbedImmersiveView(B)&&(v.register("videoIngressClick",l),v.register("showroomIngressClick",l))}});"use strict";w.when("A").register("ImageBlockLoader",function(d){return{load:function(a,b){b=b||{};b.timeout=b.timeout||4E3;d.ajax(a,b)}}});"use strict";w.when("A","jQuery","Airy","postMetric","ImageBlockATF","ImageBlockBTF","logFailedInteractionMetric","postEarlyMetric","ShoppableSceneWeblabProvider").register("imageBlockUtils",function(d,
a,b,k,n,e,m,f,I){function l(a){return null!==a&&"undefined"!==typeof a}function w(b){var c=0;a.each(b,function(a,b){var h=parseInt(b[1],10);h>c&&(c=h)});return c}function B(b){var c=0;a.each(b,function(a,b){var h=parseInt(b[0],10);h>c&&(c=h)});return c}function F(a,c,b){c=c.width();if(b.naturalMainImageSize)return c;a=w(a);0<a&&(c=Math.min(c,a));return c}function v(a,c,b){c=c.height();if(b.naturalMainImageSize)return c;a=B(a);0<a&&(c=Math.min(c,a));return c}function C(b){var c;a.each(b,function(a,
b){l(c)||(c=b[1]/b[0])});return c||1}function L(h,c,e,g,d,f,m,l,r,n,q,t,x){var I=a.extend({},e.foresterMetadataParams);null!==g&&(I.method+="."+g);var v=[];c.disabledViewIds&&(v=c.disabledViewIds);return b.embed({parentElement:h[0],streamingUrls:c.url,contentId:c.mediaObjectId,contentMinAge:Number(c.minimumAge||"")||0,contentTitle:c.title,swfUrl:e.swfUrl,foresterMetadataParams:I,backgroundColor:"black",flashParams:{wmode:"transparent"},slateImages:{preloadSlate:c.slateUrl,postMediaSlate:c.slateUrl},
videoAds:e.videoAds,bindings:{play:function(){if("ImmersiveView"===g)y||(y=!0,k.postCountMetric("dppc_chromefulVideoPlayedIV"));else if(M||(M=!0,k.postCountMetric("dppc_chromefulVideoPlayedPV")),!n){var a=k.buildNexusMetric("ib.thumbnailClick",r,c.mediaObjectId,c.groupType,q,t,x);k.emitNexusMetric(a)}}},cuePoints:[{values:c.durationSeconds-1,type:"position",callback:function(a,c,b){d&&(O(0,f,l),N(m))}}],disabledViewIds:v})}function O(a,c,b){c.fadeTo(500,0,function(){z(a,b);c.fadeTo(500,1)})}function N(a){a&&
a.toggle()}function z(b,c){var e=c.find("img");l(e[b])&&a(e[b]).click()}function g(a,c){P[a]=c?c:P[a];return P[a]}function r(b,c,e){e=e||E;e=e.colorImages;if(1>e.length||!l(e[b])||!l(c))return-1;var g=-1;a.each(e[b],function(a,b){b.variant===c&&(g=a)});return g}function t(b,c,e){e=e||E;e=e.colorImages;return!(l(e)&&l(e[b])&&l(e[b][c])&&l(e[b][c].main))||1>a.map(e[b][c].main,function(a,c){return c}).length?-1:e[b][c]}function q(a,c,b,e){e.parent().css("z-index",2);0!==b&&0!==c&&(c/=b,a>c?e.css("width",
c/a*100+"%"):e.css("height",a/c*100+"%"))}function x(b,c){var e;if(e=b.useIV)e=b.colorImages&&b.colorImages[c]&&0<b.colorImages[c].length?!0:!1;m.isEnabled&&(m.IVApplicaple=e,f.logImmersiveViewApplicability(a,m));return e}var y,M,G,E=a.extend(!0,{},n,e),P={};return{isDefined:l,isDefinedAndEmpty:function(a){return l(a)&&"object"===typeof a&&0===Object.keys(a).length},isUndefinedOrEmpty:function(a){return l(a)?"object"===typeof a&&0===Object.keys(a).length:!0},isDefinedAndNotEmpty:function(a){return l(a)?
"object"===typeof a&&0<Object.keys(a).length:!1},isjQueryObjDefined:function(a){return 0!==a.length},getAspectRatio:C,getMaxHeightOfMainImage:v,getMaxWidthOfMainImage:F,getMaxDimensionsOfMainImage:function(a,c,b){if(b.acEnabled)return[c.height(),c.width()];var e=v(a,c,b);c=F(a,c,b);a=C(a);b=c/a;c=Math.min(c,e*a);e=Math.min(e,b);return[e,c]},getContainerHeight:function(a,c,b){var e=a.get(0);a=0;if(l(e)){a=e.offsetWidth/c;a=Math.min(a,b);var g;c=E.mainImageHeightPartitions;b=E.mainImageMaxSizes;if(l(b)&&
l(c)){for(var d=0,f=p.innerHeight||document.documentElement.clientHeight||document.body.clientHeight,e=0;e<c.length;e++)f>c[e]&&(d=e+1);b.length>=d&&(g=b[d])}l(g)&&(a=Math.min(g[1],a))}return a},getColorFromState:function(b,c){if(b){c=c||E;var e="";a.each(c.visualDimensions,function(a,c){b[c]&&(e+=" "+b[c])});return e&&e.substring(1)}},createThumbnail:function(a,c,b,e){var g=b.find(".template").clone().removeClass("template").addClass("item"),f=document.createElement("img");f.src=c;g.find(".placeHolder").replaceWith(f);
(c=a.heroVideoVariant)&&"hero-image"===a.type&&a.variant===c&&g.addClass("heroImageThumbnail");l(e)&&g.addClass(e);d.declarative.create(g,"thumb-action",a);g.attr&&(g.attr("data-ux-click",""),a.type&&a.type.match(/video/)?(g.attr("data-csa-c-type","uxElement"),g.attr("data-csa-c-element-type","navigational"),g.attr("data-csa-c-action","image-block-alt-image-clickToImmersiveVideos")):(g.attr("data-csa-c-type","uxElement"),g.attr("data-csa-c-element-type","navigational"),g.attr("data-csa-c-action",
"image-block-alt-image-hover")),g.attr("data-csa-c-posy",a.thumbnailIndex+1));b.append(g)},selectGivenThumbnail:function(a,c){var b=a.find(".a-button");c.find(".a-button").removeClass("a-button-selected").removeClass("a-button-focus");b.addClass("a-button-selected").addClass("a-button-focus")},createAiryInstanceForChromeful:function(a,c,b,e,g,d,f,k){L(a,c,b,e,g,d,f,k,0,1,"","","")},createAiryInstanceForChromefulNotUseTabbedImmersiveView:L,loadMediaIntoAiry:function(a,c,b,e){a&&a.getMediaSourceInfo()!==
c.url&&(e?a.loadMedia?(G={mediaSourceInfo:[c.url],contentId:c.mediaObjectId,refTag:"vse_ib_tablet_web"},a.loadMedia(G)):a.play({videoUrl:c.url,mimeType:"video/mp4",contentId:c.mediaObjectId,refTag:"vse_ib_tablet_web"}):a.loadMedia?a.loadMedia({mediaSourceInfo:c.url,contentId:c.mediaObjectId,contentMinAge:Number(c.minimumAge||"")||0,contentTitle:c.title,slateImages:{preloadSlate:c.slateUrl,postMediaSlate:c.slateUrl}}):a.play({videoUrl:c.url,mimeType:"video/mp4",contentId:c.mediaObjectId}))},showUnavailable:function(b){b&&
(a("#imageBlock .unvailableVariation").html(b),a("#imageBlock .variationUnavailable").show())},hideUnavailable:function(){a("#imageBlock .variationUnavailable").hide()},fadeToThumbnail:O,toggleVideoCaption:N,selectThumbnail:z,spinner:function(b,c){var e=a("#imageBlock .a-spinner").parent();0===e.length&&(e=a("\x3cdiv\x3e\x3c/div\x3e").append(a("\x3cspan\x3e\x3c/span\x3e").addClass("a-spinner").addClass("a-spinner-medium")),b.append(e),e.css({position:"absolute",left:"50%",top:"50%",transform:"translate3d(-50%, -50%, 0)",
"-webkit-transform":"translate3d(-50%, -50%, 0)","z-index":"3",width:"48px",height:"48px",border:"8px solid #FFFFFF","-webkit-border-radius":"20px","-moz-border-radius":"20px","border-radius":"100%"}));c?e.show():e.hide();return e},rankedImagesReadyEvent:function(a){return"ranked-images-ready-for-"+a},ajaxState:g,getIndexForVariant:r,getImageHash:t,lazyLoadingRequired:function(a,c,b){c=Math.max(r(a.color,c.getCurrentItem().variant,b),0);c=-1!==t(a.color,c,b);a=b.colorToAsin[a.color]&&b.colorToAsin[a.color].asin;
a=!a||"success"!==g(a);return!b.lazyLoadExperienceDisabled&&!c&&a},lazyLoadOnHoverEnabled:function(a){return!a.lazyLoadExperienceOnHoverDisabled},updateAspectRatio:q,repositionVideoBanner:function(a,c,b,e){setTimeout(function(){var b=a.width()/a.height();q(b,16,9,c)},e||0)},getVideosCount:function(a,c){return c.useChildVideos&&c.colorToVideo[a]?c.colorToVideo[a].length:c.videos?c.videos.length:0},getVideoHash:function(a,c,b){if(b.useChildVideos){if(!l(b.colorToVideo))return-1;a=b.colorToVideo[a]}else a=
b.videos;return l(a)&&l(a[c])&&l(a[c].url)?a[c]:-1},isImmersiveViewEnabled:x,playVideoInImmersiveView:function(a,c){return x(a,c)&&a.useTabbedImmersiveView},useTabbedImmersiveView:function(a){return a.useTabbedImmersiveView},getMediaSourceInfo:function(){return l(G)?G.mediaSourceInfo[0]:""},getNilgiriServiceAjaxRequest:function(a,c,b){return{requester:"DetailPageTablet",marketplaceID:b.marketPlaceID,clientPrefix:"ImageBlock_tablet",locale:b.languageCode,page:"DetailPageTablet",placement:"ImageBlock",
video:{videoURL:b.url,imageURL:b.slateUrl}}},addTag:function(a){p.ue&&p.ue.tag&&p.ue.tag(a)},isShoppableScenesEnabled:function(){return I.isEnabled&&0<a(".mirai-scene-image-block-template").length}}});"use strict";w.when("A","jQuery","imageBlockUtils","ImageBlockHeroUtils").register("ImageBlockHeroImageView",function(d,a,b,k){function n(e,d,f,l){if(!b.isjQueryObjDefined(e.find(".a-button-selected"))){var n=C.getCurrentItem();if(!l||"chromeless-video"!==n.type||!v.autoplayVideo){l=0;if("hero-image"===
n.type){l=m(n.color,n.variant);if(-1===l)return;l=-1!==l?l:0}var y=d+l;y>=f&&(l=0,y=d);d=k.getHeroImageHash(v,n.color,l);-1!==d&&(L.dispatch("updateModel",{data:{index:l,thumbnailIndex:y,variant:d.variant,type:"hero-image"}}),d=e.find(".item").get(y),b.selectGivenThumbnail(a(d),e))}}}function e(e,d,f){if("hero-video"===C.getCurrentItem().type)return e;d=v.heroImage&&v.heroImage[d];var k=e;b.isDefined(d)&&(a.each(d,function(a,d){e<v.maxAlts&&(b.createThumbnail({type:"hero-image",index:a,thumbnailIndex:e,
variant:d.variant},d.thumb,O,"imageThumbnail"),e++)}),n(O,k,e,f));return e}function m(e,d){var f=v.heroImage;if(1>f.length||!b.isDefined(f[e])||!b.isDefined(d))return-1;var k=-1;a.each(f[e],function(a,b){b.variant===d&&(k=a)});return k}function f(){if(N.length&&v.repositionHeroImage){var a=k.getHeroDimParams(v,C.getCurrentItem()),e;b.isDefined(a)&&(e=b.isDefined(a.xPos)?a.xPos+"px "+a.yPos+"px ":"center "+a.yPos+"px ",N.css({"background-position":e,"background-size":a.width+"px "+a.height+"px ","max-width":a.width+
"px ","min-height":a.height+"px ",filter:"","-ms-filter":""}))}}function I(a,e,d,f){if(N.length&&a&&e){if("function"===typeof d||f){var m=new Image;m.onload=f?function(){N.css("background-image",'url("'+a+'")')}:d;m.src=a}d=e[1];var m=e[0],l;f||N.css({"background-image":'url("'+a+'")'});v.repositionHeroImage&&(e=k.getHeroDimParams(v,C.getCurrentItem(),e),b.isDefined(e)&&(d=e.width,m=e.height,l=b.isDefined(e.xPos)?e.xPos+"px "+e.yPos+"px ":"center "+e.yPos+"px "));N.css({"background-position":l,"background-size":d+
"px "+m+"px ","max-width":d+"px ","min-height":m+"px ",filter:"","-ms-filter":""})}}function l(b,e,d,f){b=k.getHeroImageHash(v,b,e);if(-1===b)return-1;e=a.map(b.main,function(a,b){return b})[0];I(e,b.main[e],d,f)}function p(a,b,e){if("hero-image"!==a.type)return-1;var d=m(a.color,C.getCurrentItem().variant),d=-1!==d?d:0;if(-1===k.getHeroImageHash(v,a.color,d))return-1;var f=C.getCurrentItem();a.thumbnailIndex=f.thumbnailIndex;a.type=f.type;a.variant=f.variant;a.index=d;B(a,b,e)}function B(a,b,e){var f=
k.getHeroImageHash(v,a.color,a.index),m;m=a&&z&&d.equals(a,z)?!0:!1;z||(z=a);if(!m&&a||b)l(a.color,a.index,b,e),z=a;N.removeClass("hide-background");d.trigger("dp:image-block:update",f)}var w,v,C,L,O,N,z={};return function(d,m,k,l){w=this;v=d;C=m;L=l;v.heroImage[v.landingAsinColor]=v.heroImage[v.defaultColor];w.render=function(b,d,f,g,m,k,h){O=g;N=a("#heroImage");b=e(d,b,k);p(C.getCurrentItem(),h,k);return b};w.update=function(a){var e=a.data;"ingress"!==e.type&&N.addClass("hide-background");"swatchHover"===
a.type?a.captured||(e.type=C.getCurrentItem().type,-1!==p(e)&&(a.captured=!0)):"hero-image"===e.type&&(B(e),"click"!==a.type&&v.usePeekHover||b.selectGivenThumbnail(a.$declarativeParent,O))};L.register("resize",f)}});"use strict";w.when("A","jQuery","imageBlockUtils").register("ImageBlockAltImageIngressView",function(d,a,b){var k,n,e,m;return function(a,I,l,p){k=this;n=a;e=p;k.render=function(a,e,f,l,I,p,w){m=l;k=this;f=n.maxAlts;l=e;I=n.colorImages[a]?n.colorImages[a].length:0;I+=b.getVideosCount(a,
n);a=n.heroImage[a];p=0;a&&(p=a.length);a=I+p;a>f&&(f=a-f,a=m.find(".altIngressTemplate").clone().removeClass("altIngressTemplate").removeClass("aok-hidden").addClass("item"),f+="+",l={type:"ingress",index:0,thumbnailIndex:e,variant:""},a.find("#altIngressText").append(f),d.declarative.create(a,"thumb-action",l),m.append(a),l=e++);return l};k.update=function(a){"ingress"===a.data.type&&"click"===a.type&&e.dispatch("imageClick",a)}}});"use strict";w.when("imageBlockUtils").register("ImageBlockState",
function(d){return function(a,b,k){this.getImageHash=function(b){var e=k.getCurrentItem();b=d.getIndexForVariant(e.color,b||"MAIN",a);return d.getImageHash(e.color,b,a)};this.onImageUpdateForTwister=function(a){b.register("updateSelection",function(b){"swatchClick"===b.type&&"function"===typeof a&&a()})}}});"use strict";w.when("jQuery","imageBlockUtils").register("ImageBlockHeroUtils",function(d,a){function b(a,b){var d;if(b.repositionHeroImage){d=a[1];var k=a[0];if(768>=(p.innerHeight||document.documentElement.clientHeight||
document.body.clientHeight))d*=.7,k*=.7;else{var l=((p.innerWidth||document.documentElement.clientWidth||document.body.clientWidth)-1024)/256,l=Math.max(Math.min(l,1),0);d*=.7+.3*l;k*=.7+.3*l}d=[d,k]}return d}function k(b,d,f){var k;if(f.repositionHeroImage){var l=p.innerWidth||document.documentElement.clientWidth||document.body.clientWidth;f=f.heroFocalPoint;if(a.isDefined(f)){k=Math.max((l-Math.min(1500,b))/2,0);var n=Math.max((l-b)/2,0);k-=n;l=Math.max(Math.min(l,1500),1024);k=k+(l-420-23)/2-b/
d[1]*f}}return k}function n(b,k,f){b=b.heroImage;return!(a.isDefined(b)&&a.isDefined(b[k])&&a.isDefined(b[k][f])&&a.isDefined(b[k][f].main))||1>d.map(b[k][f].main,function(a,b){return b}).length?-1:b[k][f]}return{getHeroImageHash:n,getHeroDimParams:function(e,m,f){if(e.repositionHeroImage){if(!a.isDefined(f)){f=n(e,m.color,m.index);if(-1===f)return;m=d.map(f.main,function(a,b){return b})[0];f=f.main[m]}m=b(f,e);e=k(m[0],f,e);return{height:m[1],width:m[0],xPos:e,yPos:75}}}}});"use strict";w.when("postMetric").register("ImageBlockImmersiveViewShowroom",
function(d){function a(){this.render=function(){};this.update=function(){}}return function(b,k,n,e){var m=!1,f=new a;w.now("showroom-image-block-view").execute("showroom-image-block-view-decider",function(a){a!==ea&&(m=!0,f=new a(b,k,n,e))});b&&!0===b.showroomEnabled&&!1===m&&d.postCountMetric("showroom:atf:imageBlock:hiddenDueToAssetsNotPresentInTime");return f}});"use strict";w.when("A","jQuery","imageBlockUtils").register("imageBlockImmersiveViewUtils",function(d,a,b){function k(a,k){var f=d.copy(a);
if(b.isDefined(a)&&a.length>k){try{for(var n=-1,l=0;l<a.length;l++){var p=a.charAt(l);if(" "===p||"."===p||"?"===p||";"===p||","===p||":"===p)n=l;if(l===k-4){f=a.substring(0,-1===n?l:n);break}}}catch(w){f=a.substring(0,k-3)}f+="..."}return f}function n(a,b){var d=a.lastIndexOf(".");return a="_"===a.charAt(d-1)?a.substring(0,d-1)+b+a.substring(d):a.substring(0,d)+"."+b+a.substring(d)}return{getDimension:function(a,b){var d=parseInt(a.css(b),10);return isNaN(d)?0:d},attachTabSelectHandler:function(a,
b){d.on("dp:ivTabs:"+a+":select",b)},attachTabDeselectHandler:function(a,b){d.on("dp:ivTabs:"+a+":deselect",b)},attachImmersiveViewResizeHandler:function(a){d.on("dp:image-block:immersive-view:resize",a)},detachImmersiveViewResizeHandler:function(a){d.off("dp:image-block:immersive-view:resize",a)},attachImmersiveViewResetHandler:function(a){d.on("a:popover:afterHide:immersiveView",a)},hideTabHeading:function(b){a("#"+b).hide()},unhideTabHeading:function(b){a("#"+b).show()},addStyleCodeToURL:n,getResizedThumbnailURL:function(a,
b){a=a.replace(/\._(AA|SS)\d+_/,"").replace(/\._SX\d+_SY\d+_CR,0,0,\d+,\d+_/,"");a=a.replace(/\._(US)\d+_/,"").replace(/\._SR\d+,\d+_/,"").replace(/\._SP[0-9,C]+_/,"");a=a.replace(/\._CB\d+_SS\d+_/,"");var d="_AA50_";b&&(d+="FMpng_RI_");return n(a,d)},populateVariationSelection:function(e){if(b.isDefined(p.DetailPage)&&b.isDefined(p.DetailPage.StateController)){e.empty();var d=p.DetailPage.StateController.getState(),f=d.variation_label_order,k;for(k in f)if(f.hasOwnProperty(k)){var l=f[k],n=d.selected_variations[l],
l=d.variation_display_labels[l];n&&a("\x3cdiv/\x3e").addClass("ivVariations").text(l+":"+n).appendTo(e)}}},populateTitle:function(a,b,d){a.html(d.title);a.attr("title",a.text());a.html(k(d.title,b))},animateStageIn:function(a){a.animate({opacity:1},200)},animateStageOut:function(a,b){a.animate({opacity:.4},100,b)},logError:function(a,b,d,k){p.ueLogError&&p.ueLogError(k,{logLevel:a,attribution:b,message:d})}}});"use strict";w.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils").register("ImageBlockImmersiveViewImages",
function(d,a,b,k,n){function e(){n.populateTitle(t.find("#ivTitle"),160,g)}function m(){var a=r.getCurrentItem().color;x=g.colorImages[a];q=g.heroImage[a];y=M=0;b.isDefined(q)&&(y=q.length);b.isDefined(x)&&(M=x.length)}function f(a){return a.hiRes||a.large||a.main[a.main.length-1]}function p(){var a=t.find("#ivStage").find("#ivLargeImage"),b=a.width(),e=a.height(),d=a.find(".fullscreen");d.removeAttr("style");var f=d.width(),k=d.height();0<d.length&&(d[0].naturalWidth&&(f=d[0].naturalWidth),d[0].naturalHeight&&
(k=d[0].naturalHeight));a.css("cursor","auto");var f=0===f?1:f,k=0===k?1:k,m=Math.min(b/f,e/k),l=k*m,n=f*m;1>m?(E?a.css("cursor","url('"+g.staticImages.zoomIn+"'), auto"):(a.css("cursor","-webkit-zoom-in"),a.css("cursor","-moz-zoom-in"),a.css("cursor","zoom-in")),c=!0):c=!1;f=Math.min(n,f);k=Math.min(l-20,k);d.css({"margin-top":(e-k)/2,"margin-left":(b-f)/2,height:k,width:f});a.css("visibility","visible");h=!1}function l(a){var b=t.find("#ivLargeImage");b.css("visibility","hidden");b.empty();n.animateStageIn(b);
b.append(a);p()}function w(c){t.find("#ivLargeImage").css("display","none");t.find("#ivLargeImage").css("display","block");var e;"hero-image"===c?b.isDefined(q)&&(e=f(q[G.index])):b.isDefined(x)&&(e=f(x[G.index]));if(b.isDefined(e)){t.find(".fullscreen").remove();var d=a("\x3cimg\x3e").attr("src",e).addClass("fullscreen"),h=t.find("#ivLargeImage");n.animateStageOut(h,function(){d.load(function(){l(d)});if(d[0].complete)l(d);else{h.empty();var b=(h.height()-104)/2,c=(h.width()-80)/2;a("\x3cimg\x3e").attr("src",
g.staticImages.spinner).css({position:"relative",top:b+"px",left:c+"px"}).appendTo(h)}})}}function B(a){t.find(".ivThumb").removeClass("selected");a.addClass("selected");a.hasClass("ivHeroImage")?G.type="hero-image":G.type="image";G.index=a.attr("id").split("_")[1];w(G.type);k.postCountMetric("dpcc_iv_thumbCLick_"+(parseInt(G.index,10)+1)+"_"+(y+M))}function F(){t.delegate(".ivThumb","click",function(){var b=a(this);B(b)})}function v(a,b){return 0<b?b/2:Math.min(0,Math.max(b,a))}function C(a){var b=
H.top-(a.pageY-K[1])*D;a=v(H.left-(a.pageX-K[0])*D,J.left);b=v(b,J.top);t.find(".fullscreen").css({left:a,top:b})}function L(){t.delegate("#ivLargeImage","click",function(a){if(h)p();else if(c){t.find(".fullscreen").removeAttr("style");if(c){var b=t.find("#ivLargeImage"),e=b.find(".fullscreen");E?b.css("cursor","url('"+g.staticImages.zoomOut+"'), auto"):(b.css("cursor","-webkit-zoom-out"),b.css("cursor","-moz-zoom-out"),b.css("cursor","zoom-out"));h=!0;var d=t.find("#ivLargeImage");J.left=d.width()-
e.width();J.top=d.height()-e.height();var d=b.height()/2,f=b.width()/2;K=[b.offset().left+f,b.offset().top+d];H.top=d-e.height()/2;H.left=f-e.width()/2;e.css({position:"relative",left:H.left,top:H.top});D=Math.max(e.height()/b.height(),e.width()/b.width())}C(a);k.postCountMetric("dpcc_iv_largeImageCLick")}});t.delegate("#ivLargeImage","mousemove",function(a){h&&C(a)})}function O(){t.find("#ivLargeImage").empty()}function N(c){if(P){t=a("#ivMain");m();G=r.getCurrentItem();e();n.populateVariationSelection(t.find("#ivVariationSelection"));
c=t.find("#ivThumbs");c.find(".ivRow").not(".placeholder").remove();for(var d=y+M,f=0,g=0;f<d;)for(var h=c.find(".ivRow.placeholder").clone().removeClass("placeholder").appendTo(c),k=0;4>k&&f<d;k++,f++,g++)if(g<y){var l=q[f].thumb,p=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").addClass("ivHeroImage").attr({id:"ivHeroImage_"+f,"data-csa-c-type":"item","data-csa-c-component":"imageBlock","data-csa-c-content-id":"image-block-immersive-view-hero-image","data-csa-c-posy":f+1}).appendTo(h);
p.find(".ivThumbImage").css("background",'url("'+n.getResizedThumbnailURL(l)+'") center no-repeat')}else g>=y&&g<M+y&&(l=x[f-y].thumb,p=c.find(".ivThumb.placeholder").clone().removeClass("placeholder").attr({id:"ivImage_"+(f-y),"data-csa-c-type":"item","data-csa-c-component":"imageBlock","data-csa-c-content-id":"image-block-immersive-view-alt-image","data-csa-c-posy":f-y+1}).appendTo(h),p.find(".ivThumbImage").css("background",'url("'+n.getResizedThumbnailURL(l)+'") center no-repeat'));S();P=!1}else e();
c=a("#ivImagesTab").height();t.css("height",c);d=t.find("#ivTitle").outerHeight(!0);f=t.find("#ivVariationSelection").outerHeight(!0);g=t.find("#ivThumbs");h=n.getDimension(g,"margin-top")+n.getDimension(g,"margin-bottom");g.css("height",c-d-f-h);t.find("#ivLargeImage").css("height",c);c=t.find("#ivStage");d=t[0]&&t[0].getBoundingClientRect&&Math.floor(t[0].getBoundingClientRect().width)||t.width();c.css("width",d-n.getDimension(t,"padding-left")-n.getDimension(t,"padding-right")-t.find("#ivThumbColumn").width()-
n.getDimension(c,"margin-left")-n.getDimension(c,"margin-right"));G=r.getCurrentItem();c="hero-image"===G.type?t.find("#ivHeroImage_"+G.index):"image"===G.type?t.find("#ivImage_"+G.index):b.isDefined(q)?t.find("#ivHeroImage_"+G.index):t.find("#ivImage_"+G.index);b.isjQueryObjDefined(c)||(c=t.find("#ivImage_0"));B(c)}var z,g,r,t,q,x,y,M,G,E=navigator.userAgent.match(/msie|trident/i),P=!0,h=!1,c=!1,J={},H={},D,K,P=!0,S=d.once(function(){F();L();n.attachImmersiveViewResizeHandler(N);n.attachTabDeselectHandler("ivImagesTab",
O)});return function(b,c,e,d){z=this;g=b;r=c;z.render=function(b,c,e,d,f,g){P=!0;m();0===y+M?n.hideTabHeading("ivImagesTabHeading"):n.unhideTabHeading("ivImagesTabHeading");1===y+M?a("#ivThumbs").hide():a("#ivThumbs").show()};z.update=function(a){};n.attachTabSelectHandler("ivImagesTab",N)}});"use strict";w.when("A","jQuery","imageBlockUtils","postMetric","imageBlockImmersiveViewUtils","vse_ns_preLoaderHook","vse_ns_lazyLoaderHook").register("ImageBlockImmersiveViewVideos",function(d,a,b,k,n,e,m){function f(){y.delegate(".ivThumb",
"click",function(){var b=a(this);y.find(".ivThumb").removeClass("selected");b.addClass("selected");b.hasClass("ivThumbVideo")&&(M.type="chromeful-video",M.index=b.attr("id").split("_")[1])})}function I(){if(ca){var b=a("#ivVideosTab").height();y.css("height",b);var c=y.find(".vse-lb-container");G=b-n.getDimension(c,"padding-top")-n.getDimension(c,"padding-bottom");c.css({"max-height":b,overflow:"hidden"});if(X){y.css({"max-width":Math.floor(1.77*G)});return}var b=y.find(".vse-player-container"),c=
y.find(".vse-video-action-strip"),e=y.find(".vse-lb-video-metadata"),d=Math.floor(G-n.getDimension(e,"height")-n.getDimension(c,"height")),f=Math.floor(1.77*d);b.css({"max-height":d,"max-width":f,marginLeft:"auto",marginRight:"auto"});e.css({"max-width":f,marginLeft:"auto",marginRight:"auto"});c.css({"max-width":f,marginLeft:"auto",marginRight:"auto"})}T&&(b=y.find(".vse-vertical-scroll"),c=n.getDimension(b,"margin-top")+n.getDimension(b,"margin-bottom"),b.css("max-height",G-c))}function l(){w();
E&&E.pause();U=!1;S=!0;J=null;ha=!0;ca=!1}function w(){U=!1;E&&E.pause()}function B(c){J=c.clickTimeStamp?c.clickTimeStamp:d.now();b.isDefined(x)&&(x.eventTimestamp=J);U=!0;V&&(m.get(d,"#ivVideoBlock",q,W,u),y=a("#ivVideoBlock"),t.getCurrentItem(),M=t.getCurrentItem(),A(),N());I();V=!1;C()}function F(b){V&&(y=a("#ivVideoBlock"),t.getCurrentItem(),M=t.getCurrentItem(),A());U&&C();I()}function v(a){E=a.player;k.postTimeMetric("vse_ib_desktop_player_initialisation_duration",d.now()-da);r.imageBlockRenderingStartTime&&
k.postTimeMetric("vse_ib_desktop_time_to_player_interactive",d.now()-r.imageBlockRenderingStartTime);ca&&(N(),C())}function C(){if(E&&U&&(y.find(".vse-lb-container").animate({opacity:1},200),E.play(x),k.postCountMetric("dpcc_vse_videoBlock_video_played"),S)){var a=p.ue;a&&(a=a.count("dpcc_vse_videoingressclick"),a=(new Date).getTime()-a,k.postTimeMetric("dpcc_vse_vitff",a),S=!1)}}function L(){d.trigger("vse:detailpage-imageblock:page:lightBoxClosed")}function O(a){P=a.popover.$popover;ca=!0;N()}function N(){if(ca&&
ha&&U&&E){P.addClass(d.$(P).find(".vse-lb-container").data("cssClass"));var a=x;ea&&(a=Y,ea=!1);d.trigger("vse:detailpage-imageblock:page:lightBoxOpened",{lightBoxId:"ivVideoBlock",assetSpec:a});I();ha=!1}}function z(a){document.getElementsByClassName("videoBlockIngress")[0].click();Y=a;ea=!0}var g,r,t,q,x,y,M,G,E,P,h,c,J,H,D,K,S=!0,V=!0,X=!1,T=!1,U=!1,ha=!0,ca=!1,ea=!1,Y,da=0,A=d.once(function(){f();n.attachImmersiveViewResizeHandler(F);n.attachTabDeselectHandler("ivVideosTab",w);n.attachImmersiveViewResetHandler(l)}),
ba=function(c,e,d){a("#ivVideoBlockSpinner").addClass("aok-hidden");k.postCountMetric("dpcc_vse_videoBlock_preload_failed_"+e.placement);c=t.getCurrentItem().color;c=b.getVideoHash(c,0,r);E||(E=b.createAiryInstanceForChromeful(a("#ivVideoBlock"),c,r.airyConfig,"ImmersiveView"));X=!0;a("#ivVideoBlock").css({"max-width":1.77*G,margin:"0 auto"});U&&X&&E.play({isAsync:!0})},ja=function(b,c,e){V||m.get(b,"#ivVideoBlock",q,W,u);a("#ivVideoBlockSpinner").addClass("aok-hidden")},W=function(a,b,c){T=!0;I()},
u=function(a,b,c){k.postCountMetric("dpcc_vse_videoBlock_lazyload_failed_"+b.pageContext.placement+"_"+b.configuration.type)};return function(a,f,k,m){g=this;r=a;t=f;g.render=function(a,f,g,k,m,l){a=t.getCurrentItem().color;f=b.getVideoHash(a,0,r);!0===l?h=r.mediaAsin:(h=r.colorToAsin[a]&&r.colorToAsin[a].asin,h=b.isDefined(h)?h:r.mediaAsin);c=null!==r.vseVideoDataSourceTreatment&&"T1"===r.vseVideoDataSourceTreatment?"ASIN":"physicalID";H=r.contentWeblab;D=r.contentWeblabTreatment;K=r.parentAsin||
"";V=!0;-1===f?n.hideTabHeading("ivVideosTabHeading"):(n.unhideTabHeading("ivVideosTabHeading"),q={page:"DetailPage",placement:"ImageBlock",device:"Desktop",marketplaceID:f.marketPlaceID,locale:f.languageCode,product:{contentID:h,contentIDType:"ASIN",parentContentID:K,parentContentIDType:"ASIN"},video:{contentID:f.mediaObjectId,contentIDType:c,videoURL:f.url,imageURL:f.slateUrl},requestId:r.dpRequestId,weblabContext:[{name:H,assignment:D,ignoreForG2S2Key:!0}],metadata:{ProductTitle:r.title}},x={videoUrl:q.video.videoURL,
contentId:q.video.contentID,duration:0,vendorCode:"",eventTimestamp:b.isDefined(J)?J:d.now(),imageUrl:q.video.imageURL,productAsin:q.product.contentID,index:0},b.isDefinedAndNotEmpty(E)&&(E.destroy(),E=null),da=d.now(),e.get(d,"#ivVideoBlock",q,ja,ba))};g.update=function(a){};n.attachTabSelectHandler("ivVideosTab",B);d.on("vsePlayer-detailpage-imageblock",v);d.on("a:popover:afterShow:immersiveView",O);d.on("a:popover:beforeHide:immersiveView",L);d.on("detailpage-imageblock-leave-pip",z)}});"use strict";
w.when("A","jQuery","imageBlockUtils","ImageBlockLoader","nexusLogger360","postMetric","imageBlockImmersiveViewUtils","hit-spin360-feature-data","hit-spin360-constants").register("ImageBlockImmersiveView360",function(d,a,b,k,n,e,m,f,p){function l(){var b=a("#iv360Tab").height();D.css("height",b);var c=D.find("#ivTitle360").outerHeight(!0),e=D.find("#ivVariationSelection360").outerHeight(!0),d=D.find("#ivThumbs360"),f=m.getDimension(d,"margin-top")+m.getDimension(d,"margin-bottom");d.css("height",
b-c-e-f);b=D.find("#ivStage360");c=D[0]&&D[0].getBoundingClientRect&&Math.floor(D[0].getBoundingClientRect().width)||D.width();b.css("width",c-m.getDimension(D,"padding-left")-m.getDimension(D,"padding-right")-D.find("#ivThumbColumn360").width()-m.getDimension(b,"margin-left")-m.getDimension(b,"margin-right"))}function w(){C();var a=D.find("#ivLarge360");a.css({opacity:0});setTimeout(function(){a.css({opacity:.4});m.animateStageIn(a)},200);B()}function B(){if(0<u){var a=D.find(".iv360Hint");a.removeClass("iv360HintFaded");
a.animate({opacity:1},200)}}function F(b,d){if(u<b.length){var f=a("\x3cimg /\x3e").css({display:"block",width:6*S+"px",height:V+"px"});f.hide();d.append(f);f.get(0).onload=function(){d.closest(document.documentElement).length&&(u++,1===u&&(B(),0<A&&(n.time("dppc_loadTime360",Date.now()-A,c.mediaAsin),e.postTimeMetric("dppc_loadTime360",Date.now()-A))),0<ba&&(n.time("dppc_perSpriteloadTime360",Date.now()-ba,c.mediaAsin),e.postTimeMetric("dppc_perSpriteloadTime360",Date.now()-ba)),D.find("#iv360Spinner").hide(),
f.show(),Y=5*K.imageLocations[Math.floor(da/K.imageLocations[0].length)][da%K.imageLocations[0].length],F(b,d))};f.attr("src",b[u].replace(/(\._SP)\d+(,)\d+/,"$1"+T+"$2"+X));ba=Date.now()}}function v(a){if(b.isDefined(K.spriteWidthSizes)&&0<K.spriteWidthSizes.length){var c=K.spriteWidthSizes,e=c.length,d=c[0],f=c[e-1];if(a<=d)return d;if(a>f)return f;for(d=0;d<e;d++)if(a>c[d]&&a<=c[d+1])return c[d+1]}else return a}function C(){var b=D.find("#ivLarge360");b.children("#image-360-sprites").length||(b.append("\x3cdiv id\x3d'image-360-sprites'\x3e\x3c/div\x3e"),
b.css({"margin-left":0,"margin-top":0,width:b.parent().width(),height:b.parent().height(),overflow:"hidden",position:"relative","-ms-user-select":"none","-webkit-user-select":"none","-mos-user-select":"none"}),a("\x3cimg\x3e").attr("src",c.staticImages.spinnerNoLabel).attr("id","iv360Spinner").css({position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",display:"block"}).appendTo(b),ca=!0,L())}function L(){if(b.isDefined(K.spriteURLs)&&b.isDefined(D)&&ca&&!va){var e=D.find("#ivLarge360"),
d=a("\x3cdiv\x3e").addClass("iv360Hint").css({position:"absolute",width:"100%",bottom:0,opacity:0,display:"block"});b.isDefined(K.staticImages.hint360)&&a("\x3cimg\x3e").css({"margin-left":"auto","margin-right":"auto",display:"block"}).attr("src",K.staticImages.hint360).appendTo(d);a("\x3cdiv\x3e").css({"text-align":"center"}).text(c.staticStrings.dragToSpin).appendTo(d);d.appendTo(e);var d=K.imageWidth,f=K.imageHeight,h=e.parent().width(),k=e.parent().height(),m=0,l=0;d/f>h/k?(T=v(h),X=Math.round(f/
d*T),S=Math.ceil(h),V=Math.ceil(X/T*h),l=(k-V)/2):(X=v(k),T=Math.round(d/f*X),V=Math.ceil(k),S=Math.ceil(T/X*k),m=(h-S)/2);e.css({"margin-left":m,"margin-top":l,width:S+"px",height:V+"px",overflow:"hidden",position:"relative"});e.children("#image-360-sprites").css("width",6*S+"px");F(K.spriteURLs,D.find("#image-360-sprites"),0);d=D.find("#ivLarge360");d.bind("mousedown",g);d.bind("touchstart",O);d.bind("touchmove",N);d.bind("touchend",z);a(document).bind("mousemove",r);a(document).bind("mouseup",
t);b.isDefined(c.staticImages.grab)&&e.css("cursor","url('"+c.staticImages.grab+"'), auto");va=!0}}function O(a){W=!0;ha=a.originalEvent.targetTouches[0].clientX}function N(a){W&&(q(a.originalEvent.targetTouches[0].clientX-ha),ha=a.originalEvent.targetTouches[0].clientX)}function z(a){W&&(W=!1)}function g(a){ja=!0;U=a.originalEvent.clientX;b.isDefined(c.staticImages.grabbing)&&(a=D.find("#ivLarge360"),a.css("cursor","url('"+c.staticImages.grabbing+"'), auto"),a.parents(".a-declarative").last().css("cursor",
"url('"+c.staticImages.grabbing+"'), auto"));return!1}function r(a){ja&&(q(a.originalEvent.clientX-U),U=a.originalEvent.clientX)}function t(a){ja&&(ja=!1,b.isDefined(c.staticImages.grab)&&(a=D.find("#ivLarge360"),a.css("cursor","url('"+c.staticImages.grab+"'), auto"),a.parents(".a-declarative").last().css("cursor","auto")))}function q(a){Y-=a/S*180;la&&(n.count("dppc_360dragToSpin",c.mediaAsin),e.postCountMetric("dppc_360dragToSpin"));la=!1;for(a=Y;0>a;)a+=360;for(;360<a;)a-=360;Y=a;var d;a=360;for(var f=
0;f<u;f++)for(var g=0;g<K.imageLocations[f].length;g++){var h=Math.abs(Y-5*K.imageLocations[f][g]);h<a&&(a=h,d=f*K.imageLocations[0].length+g)}d!==da&&(a=Math.floor(d/K.imageLocations[0].length),a!==Math.floor(da/K.imageLocations[0].length)&&(b.isDefined(ka)||(ka=document.createElement("canvas").getContext("2d")),f=D.find("#image-360-sprites").children(),ka.drawImage(f[a],0,0)),a=D.find(".iv360Hint").not(".iv360HintFaded"),b.isDefined(a)&&(a.addClass("iv360HintFaded"),a.animate({opacity:0},750)));
da=d;a=d%K.imageLocations[0].length*-1*S;d=-1*Math.floor(d/K.imageLocations[0].length)*V;f=D.find("#ivLarge360").children("#image-360-sprites");f.css("-webkit-transform","translate3d("+a+"px, "+d+"px, 0)");f.css("transform","translate3d("+a+"px, "+d+"px, 0)")}function x(){if(aa){D=a("#ivMain360");var b=J.getCurrentItem().color;M()&&G(b);K=M()?c.spin360ColorData[b]:ea;m.populateTitle(D.find("#ivTitle360"),160,c);m.populateVariationSelection(D.find("#ivVariationSelection360"));D.find("#ivLarge360").empty();
u=0;va=ca=!1;da=Y=0;fa();aa=!1}0!==a("#iv360Tab").height()&&(m.detachImmersiveViewResizeHandler(x),l(),w(),A=Date.now(),ia=la=!0,n.count("dppc_click360",c.mediaAsin),e.postCountMetric("dppc_click360"))}function y(a,d,g){a=c.colorToAsin[g];var h={},m=500;if(!a||!a.asin)if(g===c.defaultColor)a={asin:c.winningAsin};else return;h.params={asin:a.asin};var l="360"+a.asin,q=Date.now();h.success=function(a){n.time("dppc_asyncRequestTime360",Date.now()-q,c.mediaAsin);e.postTimeMetric("dppc_asyncRequestTime360",
Date.now()-q);a&&b.isDefined(a.spin360)?((a=a.spin360.spin360Model)&&f.setData(a),b.ajaxState(l,"success")):h.error()};h.error=function(){n.count("dppc_asyncFailedTransient360",c.mediaAsin);e.postCountMetric("dppc_asyncFailedTransient360");n.time("dppc_asyncRequestTime360",Date.now()-q,c.mediaAsin);e.postTimeMetric("dppc_asyncRequestTime360",Date.now()-q);m*=2;16E3>=m?setTimeout(function(){q=Date.now();k.load("/gp/product/features/apparel-main-image/360.html",h)},m):(n.count("dppc_asyncFailed360",
c.mediaAsin),e.postCountMetric("dppc_asyncFailed360"),b.ajaxState(l,"fail"))};b.ajaxState(l)&&"fail"!==b.ajaxState(l)||(k.load("/gp/product/features/apparel-main-image/360.html",h),b.ajaxState(l,"sent"))}function M(){return c&&b.isDefined(c.spin360ConfigEnabled)&&c.spin360ConfigEnabled}function G(a){return b.isDefinedAndNotEmpty(c.spin360ColorData[a])?!0:b.isDefined(c.spin360LazyLoadEnabled)&&c.spin360LazyLoadEnabled}function E(){ia&&(n.time("dppc_duration360",Date.now()-A,c.mediaAsin),e.postTimeMetric("dppc_duration360",
Date.now()-A),ia=!1)}function P(a){a=c.colorToAsin[a.color]&&c.colorToAsin[a.color].asin;a||(a=c.mediaAsin);return a}var h,c,J,H,D,K,S,V,X,T,U,ha,ca=!1,va=!1,Y=0,da=0,A=0,ba=0,ja=!1,W=!1,u=0,ka,la=!0,ia=!1,aa=!0,fa=d.once(function(){m.attachImmersiveViewResizeHandler(x);m.attachImmersiveViewResizeHandler(l);m.attachImmersiveViewResetHandler(E);m.attachTabDeselectHandler("iv360Tab",E)});return function(g,k,l,q){h=this;c=g;J=k;H=q;g=c.landingAsinColor;k=c.defaultColor;b.isDefined(c.staticImages.icon360)&&
a("#imageBlock #altImages ul").find(".360IngressTemplate").find("img").attr("src",m.addStyleCodeToURL(c.staticImages.icon360,"_FMpng_RI_"));M()&&(c.spin360ColorData||(c.spin360ColorData={}),g===k&&b.isDefinedAndEmpty(c.spin360ColorData[k])&&delete c.spin360ColorData[k]);d.on(p.TWISTER_DATA_EVENT,function(a){P(J.getCurrentItem())===a&&(K=f.getData(a),L(),a={type:"updatedData",data:J.getCurrentItem()},H.dispatch("updateView",a))});h.render=function(g,h,k,l,q,r){aa=!0;!M()||b.isDefinedAndEmpty(c.spin360ColorData[g])&&
!f.getData(P(J.getCurrentItem()))?m.hideTabHeading("iv360TabHeading"):(c.spin360ColorData[g]=f.getData(P(J.getCurrentItem())),b.isDefinedAndNotEmpty(c.spin360ColorData[g])?(a("#ivThumbs360").hide(),m.unhideTabHeading("iv360TabHeading"),b.isImmersiveViewEnabled(c,J.getCurrentItem().color)&&M()&&G(g)&&(h===c.maxAlts&&(g=l.find(".item.imageThumbnail"),h=l.find(".item.videoThumbnail"),b.isDefined(h)&&1<h.length?h.last().remove():g.last().remove()),g=l.find(".360IngressTemplate").clone().removeClass("360IngressTemplate").removeClass("aok-hidden").addClass("item"),
d.declarative.create(g,"button-360-click"),l.append(g),n.count("dppc_display360",c.mediaAsin),e.postCountMetric("dppc_display360"))):b.isDefined(c.spin360LazyLoadEnabled)&&c.spin360LazyLoadEnabled?(c.spin360ColorData[g]={},m.hideTabHeading("iv360TabHeading"),y(l,h,g)):m.hideTabHeading("iv360TabHeading"))};h.update=function(a){};m.attachTabSelectHandler("iv360Tab",x)}});w.register("nexusLogger360",function(){return{count:function(d,a){p.ue&&p.ue.event({asin:a,metricName:d,metricValue:1},"hit-360",
"hit360.clientEvent.3")},time:function(d,a,b){p.ue&&p.ue.event({asin:b,metricName:d,metricValue:a},"hit-360","hit360.clientEvent.3")}}});w.register("hit-spin360-constants",function(){return{TWISTER_DATA_EVENT:"spin360TwisterData"}});w.when("A","hit-spin360-constants").register("hit-spin360-feature-data",function(d,a){var b={};return{setData:function(k){var n=k.asin;b[n]||(b[n]=k,d.trigger(a.TWISTER_DATA_EVENT,n))},getData:function(a){return b[a]}}});"use strict";w.when("postMetric","imageBlockImmersiveViewUtils").execute("vse-ns-ajax-calls",
function(d,a){w.register("vse_ns_preLoaderHook",function(){function b(k,n){try{var e=k.A,m=k.block,f=k.request,p=k.handleFailure,l=k.handleSuccess,w=e.$;n--;var B=3-n-1,F=e.now();e.ajax("/vap/ew/componentbuilder",{params:f,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:f.timeout||5E3,withCredentials:!0,success:function(a){var b=e.now()-F;d.postTimeMetric("vse_preLoaderHook:success:",b);d.postCountMetric("vse_preLoaderHook:success:"+f.page+":"+f.placement+":"+
B);w(m).html(a);l(e,f,a)},error:function(a){d.postCountMetric("vse_preLoaderHook:error:"+f.page+":"+f.placement+":"+B);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<n?b(k,n):(d.postCountMetric("vse_preLoaderHook:error:",1),p(e,f,a))}})}catch(v){a.logError("FATAL","vse_ns_desktop","[vse_ns_preLoaderHook] ",v)}}return{get:function(a,d,e,m,f){b({A:a,block:d,request:e,handleFailure:f,handleSuccess:m},3)}}});w.register("vse_ns_lazyLoaderHook",function(){function b(k,n,e){try{var m=k.A,
f=k.context,p=k.handleFailure,l=k.handleSuccess;n.attr("data-configuration");var w=atob(n.attr("data-configuration")),B=JSON.parse(w),F={pageContext:f,configuration:B},v=m.now();e--;var C=3-e-1;m.ajax("/vap/ew/subcomponent/"+B.type,{params:F,paramsFormat:"json",method:"post",contentType:"application/json",timeout:f.timeout||5E3,withCredentials:!0,success:function(a){var b=m.now()-v;d.postTimeMetric("vse_lazyLoaderHook:success:",b);d.postCountMetric("vse_lazyLoaderHook:success:"+f.page+":"+f.placement+
":"+B.type+":"+C);n.html(a);l(m,F,a)},error:function(a){d.postCountMetric("vse_lazyLoaderHook:error:"+f.page+":"+f.placement+":"+B.type+":"+C);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<e?b(k,n,e):(d.postCountMetric("vse_lazyLoaderHook:error:",1),p(m,F,a))}})}catch(L){a.logError("FATAL","vse_ns_desktop","[vse_ns_lazyLoaderHook] ",L)}}return{get:function(a,d,e,m,f){var p=a.$;p(d+" div[data-configuration]").each(function(){b({A:a,context:e,handleFailure:f,handleSuccess:m},p(this),
3)})}}});w.register("vse_ns_videoPlayer",function(){function b(k,n,e){try{var m=k.A,f=k.block,p=k.request,l=k.handleFailure,w=k.handleSuccess,B=m.$;e--;var F=3-e-1,v=m.now();m.ajax("/vap/ew/subcomponent/vseplayer",{params:p,paramsFormat:"json",crossDomain:!0,method:"post",contentType:"application/json",timeout:p.timeout||5E3,withCredentials:!0,success:function(a){var b=m.now()-v;d.postTimeMetric("vse_lightPlayerLoaderHook:success:",b);d.postCountMetric("vse_lightPlayerLoaderHook:success:"+p.page+
":"+p.placement+":"+F);B(f).html(a);w(m,p,a)},error:function(a){d.postCountMetric("vse_lightPlayerLoaderHook:error:"+p.page+":"+p.placement+":"+F);(0===a.http.status||500<=a.http.status&&599>=a.http.status)&&0<e?b(k,e):(d.postCountMetric("vse_lightPlayerLoaderHook:error:",1),l(m,p,a))}})}catch(C){a.logError("FATAL","vse_ns_lightPlayer","[vse_ns_lightPlayerLoaderHook] ",C)}}return{get:function(a,d,e,m,f){b({A:a,block:d,request:e,handleFailure:f,handleSuccess:m},3)}}})});"use strict";w.when("A","ImageBlockATF",
"ImageBlockBTF","imageBlockUtils","postMetric").execute(function(d,a,b,k,n){var e=[0,50,100,500,1E3,2E3,3E3,3500];(function(){var a=b.colorImages,d=0,p;for(p in a)a[p]&&a[p].length&&(d+=a[p].length);a="image_size_bucket:gt"+e[e.length-1];for(p=1;p<e.length;p++)if(d<=e[p]){a="image_size_bucket:"+e[p-1]+"-"+e[p];break}n.postCountMetric(a);k.addTag(a)})();(function(){var b=a.colorImages;b&&b.initial&&b.initial.length&&(b=b.initial.length,p.ue&&ue.count&&ue.count("altImageCount",b))})();(function(){var a=
b.lazyLoadExperienceDisabled;k.isDefined(b.lazyLoadExperienceDisabled)&&!a&&(n.postCountMetric("lazyLoadingExperienceOnTwisterUpdateEnabled"),k.addTag("lazyLoadingExperienceOnTwisterUpdateEnabled"))})()});w.when("A","get-resource-time","postMetric","afterLoad").execute(function(d,a,b){var k=d.state("desktop-landing-image-data");k&&(k=d.values(k),a=a.getResourceTimeByName("img",k),d.each(a,function(a){a&&(a.responseEnd!=ea&&b.postCountMetric("ibDesktopLandingImageDownloadTime",p.parseInt(a.responseEnd)),
a.transferSize!=ea&&(0===a.transferSize?b.postCountMetric("ibDesktopLandingImageCached",1):(b.postCountMetric("ibDesktopLandingImageSizeInBytes",p.parseInt(a.transferSize)),b.postCountMetric("ibDesktopLandingImageNotCached",1))))}))});w.when("A","jQuery","imageBlockUtils","postMetric").register("ImageBlockShoppableSceneView",function(d,a,b,k){function n(b,d){var e=a("\x3cimg src\x3d'"+(d?v.staticImages.shoppableSceneDotHighlighted:v.staticImages.shoppableSceneDot)+"' alt\x3d''\x3e");e.css({display:d?
"none":"inline-block"});e.addClass("mirai-scene-tag").addClass(d?"active-tag":"inactive-tag");return e}function e(b){var e=a("\x3cspan\x3e");d.each(b.tags,function(b){var f=a("\x3cdiv\x3e").css({position:"absolute",left:100*b.left+"%",top:100*b.top+"%",height:"auto",width:"auto"});f.append(n(b,!1));f.append(n(b,!0));f.bind("mouseenter",function(){m(a(this).find(".mirai-scene-tag[style*\x3d'display: inline-block']"))});d.declarative.create(f,"scenes-show-details-tags-ib",{tagId:b.link});e.append(f)});
return e.children()}function m(a){a.addClass("mirai-scene-dot-pulsate");d.delay(function(){a.removeClass("mirai-scene-dot-pulsate")},4E3)}function f(a,b){a.css({display:"none"});b.css({display:"inline-block"})}function p(a,b,d){a.eq(d).css({display:"inline-block"});b.eq(d).css({display:"none"})}function l(a){w.when("mirai-multi-scene-view").execute("mirai-scene-protected-image-selection",function(){d.trigger("mirai:scene-details-change",{physicalId:a})})}function R(){var b=a("\x3cspan class\x3d'mirai-scene-view-products-button-content'\x3e"),
d=a("\x3cimg class\x3d'item-tag'\x3e").attr("src",v.staticImages.shoppableSceneViewProductsButton).addClass("item-tag"),e=a("\x3cspan class\x3d'mirai-scene-view-products-button-text'\x3e");e.html(v.staticStrings.shoppableSceneViewProductsButton);return b.append(d).append(e)[0].outerHTML}function B(a){function b(){a.$tagPlaceholder.replaceWith(g);var d=g.find(".mirai-scene-tag.active-tag"),e=g.find(".mirai-scene-tag.inactive-tag");p(d,e,0);m(g.find(".mirai-scene-tag[style*\x3d'display: inline-block']"));
L=!0;a.$viewProductsButton.removeClass("aok-hidden");"function"==typeof uex&&uex("ld","desktop-dp-atf-ib-shoppablescenes-tags-"+a.index,{wb:1});x=!0;k.postCountMetric("miraiShoppableScenes_imageLoadedCount")}if(a.shoppableScene){var l=a.$viewProductsButton.find(".a-button-text");if(0===l.children().length){l.append(R());d.declarative.create(a.$viewProductsButton,"scenes-show-details-view-products-ib",{tagId:a.shoppableScene.tags[0].link});var g=e(a.shoppableScene),n=g.find(".mirai-scene-tag.active-tag"),
t=g.find(".mirai-scene-tag.inactive-tag"),q=a.shoppableScene.physicalId,x=!1;d.on("mirai:index:change",function(a){a.scenePhysicalId===q&&(a=a.selectedIndices[0],f(n,t),p(n,t,a),m(g.find(".mirai-scene-tag[style*\x3d'display: inline-block']").eq(a)),L=!0)});d.on("mirai:scene-details-change",function(a){a.physicalId!==q||L||(f(n,t),p(n,t,0),m(g.find(".mirai-scene-tag[style*\x3d'display: inline-block']")),L=!0)});d.on("mirai:no-products-active",function(a){a.scenePhysicalId===q&&f(n,t)});d.on("mirai:set-first-product-active",
function(a){a.scenePhysicalId===q&&(f(n,t),p(n,t,0))});d.on("a:image:load:shoppable-scene:"+a.index,function(){x||(b(),k.postCountMetric("miraiShoppableScenes_imageLoadedViaAuiListenerCount"))});d.on("shoppable-scene-image-loaded",function(d){d.index!=a.index||x||(b(),k.postCountMetric("miraiShoppableScenes_imageLoadedViaMiraiListenerCount"))});w.when("mirai-multi-scene-view").execute("mirai-scene-protected-side-sheet-initialization",function(){d.trigger("mirai:scene-side-sheet-init",{icons:v.staticImages,
strings:v.staticStrings});d.trigger("mirai:scene-details-init",{scene:a.shoppableScene,imageSource:a.imageSource})})}}}var F,v,C,L=!1;return function(a,d,e,f){F=this;v=a;C=f;b.isShoppableScenesEnabled()?(C.register("initialize-shoppable-scene",B),F.render=function(a,b,d,e,f,g,k){},F.update=function(a){"mouseenter"===a.type&&(a.data.shoppableScene?l(a.data.shoppableScene.physicalId):L=!1)}):(a=function(){},F.render=a,F.update=a)}});w.now().register("ShoppableSceneWeblabProvider",function(){return{isEnabled:!0}})});
/* ******** */
(function(k){var f=window.AmazonUIPageJS||window.P,q=f._namespace||f.attributeErrors,c=q?q("DetailPageShowroomImageBlockAssets",""):f;c.guardFatal?c.guardFatal(k)(c,window):c.execute(function(){k(c,window)})})(function(k,f,q){k.when("A","imageBlockUtils","showroom-lite-atf-feature-data","showroom-image-block-detail-page-rendering","showroom-image-block-constants","showroom-image-block-metrics").register("showroom-image-block-view",function(c,r,h,e,g,a){function f(a){a=u.colorToAsin[a.color].asin;
a||(a=u.mediaAsin);return a}var b=void 0,u=void 0,m=void 0,p=void 0,k=void 0,n=void 0,t=void 0;return function(d,w,q,l){q=new Date;b=this;u=d;m=w;p=l;c.on(g.TWISTER_DATA_EVENT,function(a){f(m.getCurrentItem())===a&&(a={type:"updatedData",data:m.getCurrentItem()},p.dispatch("updateView",a))});b.render=function(b,d,r,g,w,q){b=new Date;k=g;n=w.find("#main-showroom-container");n.parent().find("#showroom-canvas-caption");c.$("#main-image-container");try{var v=f(m.getCurrentItem());if(h.isDataValidForAsin(v)){var z=
new Date,l=h.getDataForAsin(v);e.refresh(p,l.asin,l.defaultStageId);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN,new Date-z);if(!q){var x=new Date;e.updateMainImage(n,l.imageData,p);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE,new Date-x)}var y=new Date;d=e.createThumbnail(u,g,d,l.imageData);a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL,new Date-y);var A=new Date;c.$("#ivShowroomTabHeading").removeClass("aok-hidden");
a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING,new Date-A);if(v!==t){var B=new Date;a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED);var C=a.createShowroomAtfEvent(l.defaultStageId,v,a.EVENT_NAMES.IMAGEBLOCK_LOAD,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(C);t=v;a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT,new Date-B)}}else c.$("#ivShowroomTabHeading").addClass("aok-hidden")}catch(E){c.$("#ivShowroomTabHeading").addClass("aok-hidden")}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_RENDER,
new Date-b);return d};b.update=function(b){var t=new Date;try{var d=b.data;m.setCurrentEvent(b);if(d.type===g.SHOWROOM_THUMBNAIL_TYPE){var c=new Date;d.interaction=b.type;d.isUserGenerated=!0;if(h.isDataValidForAsin(f(d))){"mouseenter"===d.interaction&&d.type===g.SHOWROOM_THUMBNAIL_TYPE&&e.isShowroomMainImageHidden()&&a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER);var l=h.getDataForAsin(f(d)).imageData;e.updateMainImage(n,l,p);e.showShowroomMainImage(n)}u.usePeekHover&&"click"!==b.type||
(r.selectGivenThumbnail(b.$declarativeParent,k),"click"===b.type&&r.useTabbedImmersiveView(u)&&e.handleShowroomThumbnailClick(b));a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT,new Date-c)}else d.type!==g.SHOWROOM_MAIN_IMAGE_TYPE&&("swatchHover"===b.type?d.color===m.getCurrentItem().color&&m.getCurrentItem().type===g.SHOWROOM_THUMBNAIL_TYPE?e.showShowroomMainImage(n):e.hideShowroomMainImage(n):e.hideShowroomMainImage(n))}catch(D){}a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE,
new Date-t)};(d=document.getElementById("ivShowroomTabHeading"))&&d.addEventListener("click",function(b){a.addOne(a.COUNTER_NAMES.TAB_SELECT);b=h.getDataForAsin(t).defaultStageId;b=a.createShowroomAtfEvent(b,t,a.EVENT_NAMES.IMMERSIVE_VIEW_TAB_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(b)});a.logValue(a.TIMER_NAMES.SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE,new Date-q)}});"use strict";k.register("showroom-image-block-constants",function(){return{SHOWROOM_THUMBNAIL_TYPE:"showroom-image",SHOWROOM_MAIN_IMAGE_TYPE:"showroom-main-image",
TWISTER_DATA_EVENT:"showroomTwisterData",STRING_IDS:{MAIN_IMAGE_OVERLAY_TEXT:"showroom_dp_imageblock_atf_main_image_overlay_text",MAIN_IMAGE_OVERLAY_TEXT_T1:"showroom_dp_imageblock_atf_main_image_overlay_text_T1",MAIN_IMAGE_OVERLAY_TEXT_T2:"showroom_dp_imageblock_atf_main_image_overlay_text_T2",MAIN_IMAGE_OVERLAY_ICON_URL:"showroom_dp_imageblock_atf_main_image_overlay_icon_url"}}});"use strict";k.when("A","jQuery","imageBlockUtils","showroom-lite-atf-feature-data","showroom-image-block-constants",
"showroom-image-block-metrics").register("showroom-image-block-detail-page-rendering",function(c,r,h,e,g,a){function f(n){a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT);var t=a.createShowroomAtfEvent(p,k,a.EVENT_NAMES.IMAGEBLOCK_MAIN_IMAGE_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(t);b(n)}function b(a){a.action="showroomIngressClick";a.data=l;m.dispatch("showroomIngressClick",a)}var k,m,p,l;return{createThumbnail:function(a,b,d,c){d===a.maxAlts&&(b.find(".item.imageThumbnail").last().remove(),
d--);l={type:"showroomIngress",index:0,thumbnailIndex:d,variant:c.variant};h.createThumbnail({type:g.SHOWROOM_THUMBNAIL_TYPE,index:0,thumbnailIndex:d,variant:c.variant},c.thumb,b,"showroom-imageblock-thumbnail");d++;return d},updateMainImage:function(a,b){var d=a.find("#showroom-main-image");d.length?d.attr("src",b.hiRes):(d=r(('\x3cdiv id\x3d"showroom-main-image-container"\x3e                    \x3cimg src\x3d"'+b.hiRes+'" id\x3d"showroom-main-image"/\x3e                \x3c/div\x3e').trim()),d.appendTo(a),
c.declarative.create(a,"showroom-image-action",l),c.declarative("showroom-image-action",["click"],f),"T2"===e.getTreatment()?(d.addClass("t2"),b=a.find("#showroom-main-image-overlay-container-t2"),b.length||(b=e.getStringValue(g.STRING_IDS.MAIN_IMAGE_OVERLAY_TEXT),d=e.getStringValue(g.STRING_IDS.MAIN_IMAGE_OVERLAY_TEXT_T2),b=r(('\x3cdiv id\x3d"showroom-main-image-overlay-container-t2"\x3e                    \x3cdiv style\x3d"padding-bottom: 7px;width: 40%;"\x3e                        \x3cspan id\x3d"showroom-main-image-overlay-subtext"\x3e'+
b+'\x3c/span\x3e                    \x3c/div\x3e                    \x3cspan class\x3d"a-button a-button-base"\x3e                        \x3cspan class\x3d"a-button-inner"\x3e                            \x3cinput class\x3d"a-button-input"\x3e                            \x3cspan class\x3d"a-button-text" id\x3d"showroom-main-image-overlay-button"\x3e                                \x3cimg id\x3d"showroom-main-image-overlay-icon" src\x3d"https://m.media-amazon.com/images/G/01/showroom/icon-lightbulb._CB628497379_.png"/\x3e'+
d+"\n                            \x3c/span\x3e                        \x3c/span\x3e                    \x3c/span\x3e                \x3c/div\x3e").trim()),b.appendTo(a))):(b=a.find("#showroom-main-image-overlay-container-t1"),b.length||(b=e.getStringValue(g.STRING_IDS.MAIN_IMAGE_OVERLAY_TEXT_T1),d=e.getStringValue(g.STRING_IDS.MAIN_IMAGE_OVERLAY_ICON_URL),b=r('                \x3cdiv id\x3d"showroom-main-image-overlay-container-t1"\x3e                    \x3cimg id\x3d"showroom-main-image-overlay-icon" src\x3d"'+
(d?d:"")+'"/\x3e                    \x3cdiv\x3e                        \x3cspan id\x3d"showroom-main-image-overlay-text"\x3e'+b+"\x3c/span\x3e                    \x3c/div\x3e                \x3c/div\x3e                "),b.appendTo(a))))},hideShowroomMainImage:function(a){a.parent().css("z-index",-1);a.parent().addClass("aok-hidden")},showShowroomMainImage:function(a){a.parent().css("z-index",2);a.parent().removeClass("aok-hidden")},isShowroomMainImageHidden:function(){return r("#showroom-outer-container").hasClass("aok-hidden")},
handleShowroomIngressClick:b,handleShowroomThumbnailClick:function(c){a.addOne(a.COUNTER_NAMES.SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT);var e=a.createShowroomAtfEvent(p,k,a.EVENT_NAMES.IMAGEBLOCK_THUMBNAIL_CLICK,a.STATUS_TYPES.SUCCESS);a.logShowroomAtfEvent(e);b(c)},handleShowroomMainImageClick:f,refresh:function(a,b,d){m=a;k=b;p=d}}});"use strict";k.when("A").register("showroom-image-block-metrics",function(c){return{EVENT_NAMES:{IMAGEBLOCK_LOAD:"srm_atf_imageBlock_load",IMAGEBLOCK_THUMBNAIL_CLICK:"srm_atf_thumbnail_click",
IMAGEBLOCK_MAIN_IMAGE_CLICK:"srm_atf_main_image_click",IMMERSIVE_VIEW_TAB_CLICK:"srm_atf_iv_tab_click"},COUNTER_NAMES:{SHOWROOM_IMAGEBLOCK_FEATURE_RENDERED:"showroom:atf:imageBlock:feature:render",SHOWROOM_IMAGEBLOCK_THUMBNAIL_HOVER:"showroom:atf:imageBlock:thumbnail:hover",SHOWROOM_IMAGEBLOCK_THUMBNAIL_SELECT:"showroom:atf:imageBlock:thumbnail:select",SHOWROOM_IMAGEBLOCK_MAIN_IMAGE_SELECT:"showroom:atf:imageBlock:mainImage:select",SHOWROOM_IMAGEBLOCK_FAILED_TO_INITIALIZED_WEBLAB_TRIGGER:"showroom:atf:imageBlock:failedToInitializeWeblabTrigger"},
STATUS_TYPES:{SUCCESS:"success",ERROR:"error"},TIMER_NAMES:{SHOWROOM_IMAGEBLOCK_LATENCY_INVOKE:"showroom:atf:imageBlock:latency:invoke",SHOWROOM_IMAGEBLOCK_LATENCY_LOAD:"showroom:atf:imageBlock:latency:load",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER:"showroom:atf:imageBlock:latency:render",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_GET_DATA_FOR_ASIN:"showroom:atf:imageBlock:latency:render:getDataForAsin",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UPDATE_MAIN_IMAGE:"showroom:atf:imageBlock:latency:render:updateMainImage",
SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:createThumbnail",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UTIL_CREATE_THUMBNAIL:"showroom:atf:imageBlock:latency:render:utilCreateThumbnail",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_UNHIDE_TAB_HEADING:"showroom:atf:imageBlock:latency:render:unhideTabHeading",SHOWROOM_IMAGEBLOCK_LATENCY_RENDER_LOG_EVENT:"showroom:atf:imageBlock:latency:render:logEvent",SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE:"showroom:atf:imageBlock:latency:update",
SHOWROOM_IMAGEBLOCK_LATENCY_UPDATE_HANDLE_THUMBNAIL_EVENT:"showroom:atf:imageBlock:latency:update:handleThumbnailEvent"},addOne:function(c){try{if(f.ue&&c){var h=(f.ue.count(c)||0)+1;f.ue.count(c,h)}}catch(e){}},logValue:function(c,h){try{f.ue&&c&&"number"===typeof h&&f.ue.count(c,h)}catch(e){}},createShowroomAtfEvent:function(f,h,e,g){var a={};a.showroomId=f;a.asin=h;a.eventType=e;a.status=g;a.device=c.capabilities?c.capabilities.isAmazonApp?"AmazonApp":c.capabilities.mobile?"mobile":c.capabilities.tablet?
"tablet":"desktop":"";a.userAgent=navigator?navigator.userAgent:"";a.producerId="showroom_atf";a.schemaId="com.amazon.showroom.ingress.clientEvent.3";return a},logShowroomAtfEvent:function(c){try{f.ue&&f.ue.event&&c&&f.ue.event(c,"showroom_atf","com.amazon.showroom.ingress.clientEvent.3")}catch(h){}}}});"use strict";k.when("A","showroom-image-block-constants").register("showroom-lite-atf-feature-data",function(c,f){function h(){return g[a]}function e(a){return a in g}var g={},a,k="T1";return{setData:function(b){b&&
b.asin&&b.imageDomain&&b.defaultCollageUrl&&b.defaultStageId&&Array.isArray(b.itemMainImagePhysicalIds)&&(a=b.asin,b.experimentTreatment&&(k=b.experimentTreatment),e(b.asin)||(g[b.asin]=b,c.trigger(f.TWISTER_DATA_EVENT,b.asin)))},getDataForCurrentAsin:h,getDataForAsin:function(a){return g[a]},getStringValue:function(a){return h().displayStrings?h().displayStrings[a]:""},getTreatment:function(){return k},isDataValidForAsin:e}})});
/* ******** */
